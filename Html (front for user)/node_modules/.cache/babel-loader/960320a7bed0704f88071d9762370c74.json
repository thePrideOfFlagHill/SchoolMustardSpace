{"remainingRequest":"C:\\Users\\58215\\Desktop\\SchoolMustardSpace\\Html (front for user)\\schoolSpace\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\58215\\Desktop\\SchoolMustardSpace\\Html (front for user)\\schoolSpace\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\58215\\Desktop\\SchoolMustardSpace\\Html (front for user)\\schoolSpace\\src\\store\\modules\\d2admin\\modules\\theme.js","dependencies":[{"path":"C:\\Users\\58215\\Desktop\\SchoolMustardSpace\\Html (front for user)\\schoolSpace\\src\\store\\modules\\d2admin\\modules\\theme.js","mtime":1590487885000},{"path":"C:\\Users\\58215\\Desktop\\SchoolMustardSpace\\Html (front for user)\\schoolSpace\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\58215\\Desktop\\SchoolMustardSpace\\Html (front for user)\\schoolSpace\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\58215\\Desktop\\SchoolMustardSpace\\Html (front for user)\\schoolSpace\\node_modules\\eslint-loader\\index.js","mtime":1588755592739}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJyZWdlbmVyYXRvci1ydW50aW1lL3J1bnRpbWUiOwppbXBvcnQgX2FzeW5jVG9HZW5lcmF0b3IgZnJvbSAiQzovVXNlcnMvNTgyMTUvRGVza3RvcC9TY2hvb2xNdXN0YXJkU3BhY2UvSHRtbCAoZnJvbnQgZm9yIHVzZXIpL3NjaG9vbFNwYWNlL25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9hc3luY1RvR2VuZXJhdG9yIjsKLy8g6K6+572u5paH5Lu2CmltcG9ydCBzZXR0aW5nIGZyb20gJ0Avc2V0dGluZy5qcyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiB7CiAgICAvLyDkuLvpopgKICAgIGxpc3Q6IHNldHRpbmcudGhlbWUubGlzdCwKICAgIC8vIOeOsOWcqOa/gOa0u+eahOS4u+mimCDov5nlupTor6XmmK/kuIDkuKrlkI3lrZcg5LiN5piv5a+56LGhCiAgICBhY3RpdmVOYW1lOiBzZXR0aW5nLnRoZW1lLmxpc3RbMF0ubmFtZQogIH0sCiAgZ2V0dGVyczogewogICAgLyoqCiAgICAgKiBAZGVzY3JpcHRpb24g6L+U5Zue5b2T5YmN55qE5Li76aKY5L+h5oGvIOS4jeaYr+S4gOS4quWQjeWtlyDogIzmmK/lvZPliY3mv4DmtLvkuLvpopjnmoTmiYDmnInmlbDmja4KICAgICAqIEBwYXJhbSB7T2JqZWN0fSBzdGF0ZSBzdGF0ZQogICAgICovCiAgICBhY3RpdmVTZXR0aW5nOiBmdW5jdGlvbiBhY3RpdmVTZXR0aW5nKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5saXN0LmZpbmQoZnVuY3Rpb24gKHRoZW1lKSB7CiAgICAgICAgcmV0dXJuIHRoZW1lLm5hbWUgPT09IHN0YXRlLmFjdGl2ZU5hbWU7CiAgICAgIH0pOwogICAgfQogIH0sCiAgYWN0aW9uczogewogICAgLyoqCiAgICAgKiBAZGVzY3JpcHRpb24g5r+A5rS75LiA5Liq5Li76aKYCiAgICAgKiBAcGFyYW0ge1N0cmluZ30gdGhlbWVWYWx1ZSDpnIDopoHmv4DmtLvnmoTkuLvpopjlkI3np7AKICAgICAqLwogICAgc2V0OiBmdW5jdGlvbiBzZXQoX3JlZiwgdGhlbWVOYW1lKSB7CiAgICAgIHZhciBzdGF0ZSA9IF9yZWYuc3RhdGUsCiAgICAgICAgICBjb21taXQgPSBfcmVmLmNvbW1pdCwKICAgICAgICAgIGRpc3BhdGNoID0gX3JlZi5kaXNwYXRjaDsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBfcmVmMiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShyZXNvbHZlKSB7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgIC8vIOajgOafpei/meS4quS4u+mimOWcqOS4u+mimOWIl+ihqOmHjOaYr+WQpuWtmOWcqAogICAgICAgICAgICAgICAgICBzdGF0ZS5hY3RpdmVOYW1lID0gc3RhdGUubGlzdC5maW5kKGZ1bmN0aW9uIChlKSB7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGUubmFtZSA9PT0gdGhlbWVOYW1lOwogICAgICAgICAgICAgICAgICB9KSA/IHRoZW1lTmFtZSA6IHN0YXRlLmxpc3RbMF0ubmFtZTsgLy8g5bCGIHZ1ZXgg5Lit55qE5Li76aKY5bqU55So5YiwIGRvbQoKICAgICAgICAgICAgICAgICAgY29tbWl0KCdkb20nKTsgLy8g5oyB5LmF5YyWCgogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoKCdkMmFkbWluL2RiL3NldCcsIHsKICAgICAgICAgICAgICAgICAgICBkYk5hbWU6ICdzeXMnLAogICAgICAgICAgICAgICAgICAgIHBhdGg6ICd0aGVtZS5hY3RpdmVOYW1lJywKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogc3RhdGUuYWN0aXZlTmFtZSwKICAgICAgICAgICAgICAgICAgICB1c2VyOiB0cnVlCiAgICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGNhc2UgNDoKICAgICAgICAgICAgICAgICAgLy8gZW5kCiAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTsKCiAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgICAgfSkpOwoKICAgICAgICByZXR1cm4gZnVuY3Rpb24gKF94KSB7CiAgICAgICAgICByZXR1cm4gX3JlZjIuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICB9OwogICAgICB9KCkpOwogICAgfSwKCiAgICAvKioKICAgICAqIEBkZXNjcmlwdGlvbiDku47mjIHkuYXljJbmlbDmja7liqDovb3kuLvpopjorr7nva4gICAgICogQHBhcmFtIHtPYmplY3R9IGNvbnRleHQKICAgICAqLwogICAgbG9hZDogZnVuY3Rpb24gbG9hZChfcmVmMykgewogICAgICB2YXIgc3RhdGUgPSBfcmVmMy5zdGF0ZSwKICAgICAgICAgIGNvbW1pdCA9IF9yZWYzLmNvbW1pdCwKICAgICAgICAgIGRpc3BhdGNoID0gX3JlZjMuZGlzcGF0Y2g7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICB2YXIgX3JlZjQgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKHJlc29sdmUpIHsKICAgICAgICAgIHZhciBhY3RpdmVOYW1lOwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyOwogICAgICAgICAgICAgICAgICByZXR1cm4gZGlzcGF0Y2goJ2QyYWRtaW4vZGIvZ2V0JywgewogICAgICAgICAgICAgICAgICAgIGRiTmFtZTogJ3N5cycsCiAgICAgICAgICAgICAgICAgICAgcGF0aDogJ3RoZW1lLmFjdGl2ZU5hbWUnLAogICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogc3RhdGUubGlzdFswXS5uYW1lLAogICAgICAgICAgICAgICAgICAgIHVzZXI6IHRydWUKICAgICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICBhY3RpdmVOYW1lID0gX2NvbnRleHQyLnNlbnQ7CgogICAgICAgICAgICAgICAgICBpZiAoIXN0YXRlLmxpc3QuZmluZChmdW5jdGlvbiAoZSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBlLm5hbWUgPT09IGFjdGl2ZU5hbWU7CiAgICAgICAgICAgICAgICAgIH0pKSB7CiAgICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSA3OwogICAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICBzdGF0ZS5hY3RpdmVOYW1lID0gYWN0aXZlTmFtZTsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAxMDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgICBzdGF0ZS5hY3RpdmVOYW1lID0gc3RhdGUubGlzdFswXS5uYW1lOyAvLyDmjIHkuYXljJYKCiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaCgnZDJhZG1pbi9kYi9zZXQnLCB7CiAgICAgICAgICAgICAgICAgICAgZGJOYW1lOiAnc3lzJywKICAgICAgICAgICAgICAgICAgICBwYXRoOiAndGhlbWUuYWN0aXZlTmFtZScsCiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHN0YXRlLmFjdGl2ZU5hbWUsCiAgICAgICAgICAgICAgICAgICAgdXNlcjogdHJ1ZQogICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgICAvLyDlsIYgdnVleCDkuK3nmoTkuLvpopjlupTnlKjliLAgZG9tCiAgICAgICAgICAgICAgICAgIGNvbW1pdCgnZG9tJyk7IC8vIGVuZAoKICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpOwoKICAgICAgICAgICAgICAgIGNhc2UgMTI6CiAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgICB9KSk7CgogICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gyKSB7CiAgICAgICAgICByZXR1cm4gX3JlZjQuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICB9OwogICAgICB9KCkpOwogICAgfQogIH0sCiAgbXV0YXRpb25zOiB7CiAgICAvKioKICAgICAqIEBkZXNjcmlwdGlvbiDlsIYgdnVleCDkuK3nmoTkuLvpopjlupTnlKjliLAgZG9tCiAgICAgKiBAcGFyYW0ge09iamVjdH0gc3RhdGUgc3RhdGUKICAgICAqLwogICAgZG9tOiBmdW5jdGlvbiBkb20oc3RhdGUpIHsKICAgICAgZG9jdW1lbnQuYm9keS5jbGFzc05hbWUgPSAidGhlbWUtIi5jb25jYXQoc3RhdGUuYWN0aXZlTmFtZSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["C:/Users/58215/Desktop/SchoolMustardSpace/Html (front for user)/schoolSpace/src/store/modules/d2admin/modules/theme.js"],"names":["setting","namespaced","state","list","theme","activeName","name","getters","activeSetting","find","actions","set","themeName","commit","dispatch","Promise","resolve","e","dbName","path","value","user","root","load","defaultValue","mutations","dom","document","body","className"],"mappings":"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","sourcesContent":["// 设置文件\nimport setting from '@/setting.js'\n\nexport default {\n  namespaced: true,\n  state: {\n    // 主题\n    list: setting.theme.list,\n    // 现在激活的主题 这应该是一个名字 不是对象\n    activeName: setting.theme.list[0].name\n  },\n  getters: {\n    /**\n     * @description 返回当前的主题信息 不是一个名字 而是当前激活主题的所有数据\n     * @param {Object} state state\n     */\n    activeSetting (state) {\n      return state.list.find(theme => theme.name === state.activeName)\n    }\n  },\n  actions: {\n    /**\n     * @description 激活一个主题\n     * @param {String} themeValue 需要激活的主题名称\n     */\n    set ({ state, commit, dispatch }, themeName) {\n      return new Promise(async resolve => {\n        // 检查这个主题在主题列表里是否存在\n        state.activeName = state.list.find(e => e.name === themeName) ? themeName : state.list[0].name\n        // 将 vuex 中的主题应用到 dom\n        commit('dom')\n        // 持久化\n        await dispatch('d2admin/db/set', {\n          dbName: 'sys',\n          path: 'theme.activeName',\n          value: state.activeName,\n          user: true\n        }, { root: true })\n        // end\n        resolve()\n      })\n    },\n    /**\n     * @description 从持久化数据加载主题设置     * @param {Object} context\n     */\n    load ({ state, commit, dispatch }) {\n      return new Promise(async resolve => {\n        // store 赋值\n        let activeName = await dispatch('d2admin/db/get', {\n          dbName: 'sys',\n          path: 'theme.activeName',\n          defaultValue: state.list[0].name,\n          user: true\n        }, { root: true })\n        // 检查这个主题在主题列表里是否存在\n        if (state.list.find(e => e.name === activeName)) {\n          state.activeName = activeName\n        } else {\n          state.activeName = state.list[0].name\n          // 持久化\n          await dispatch('d2admin/db/set', {\n            dbName: 'sys',\n            path: 'theme.activeName',\n            value: state.activeName,\n            user: true\n          }, { root: true })\n        }\n        // 将 vuex 中的主题应用到 dom\n        commit('dom')\n        // end\n        resolve()\n      })\n    }\n  },\n  mutations: {\n    /**\n     * @description 将 vuex 中的主题应用到 dom\n     * @param {Object} state state\n     */\n    dom (state) {\n      document.body.className = `theme-${state.activeName}`\n    }\n  }\n}\n"]}]}