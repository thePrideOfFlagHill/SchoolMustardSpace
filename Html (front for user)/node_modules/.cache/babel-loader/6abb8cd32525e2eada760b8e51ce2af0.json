{"remainingRequest":"D:\\实践\\d2-admin-start-kit-master\\node_modules\\babel-loader\\lib\\index.js!D:\\实践\\d2-admin-start-kit-master\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\实践\\d2-admin-start-kit-master\\src\\plugin\\axios\\index.js","dependencies":[{"path":"D:\\实践\\d2-admin-start-kit-master\\src\\plugin\\axios\\index.js","mtime":1588660849803},{"path":"D:\\实践\\d2-admin-start-kit-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\实践\\d2-admin-start-kit-master\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\实践\\d2-admin-start-kit-master\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBzdG9yZSBmcm9tICdAL3N0b3JlJzsKaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJzsKaW1wb3J0IHsgTWVzc2FnZSB9IGZyb20gJ2VsZW1lbnQtdWknOwppbXBvcnQgdXRpbCBmcm9tICdAL2xpYnMvdXRpbCc7IC8vIOWIm+W7uuS4gOS4qumUmeivrwoKZnVuY3Rpb24gZXJyb3JDcmVhdGUobXNnKSB7CiAgdmFyIGVycm9yID0gbmV3IEVycm9yKG1zZyk7CiAgZXJyb3JMb2coZXJyb3IpOwogIHRocm93IGVycm9yOwp9IC8vIOiusOW9leWSjOaYvuekuumUmeivrwoKCmZ1bmN0aW9uIGVycm9yTG9nKGVycm9yKSB7CiAgLy8g5re75Yqg5Yiw5pel5b+XCiAgc3RvcmUuZGlzcGF0Y2goJ2QyYWRtaW4vbG9nL3B1c2gnLCB7CiAgICBtZXNzYWdlOiAn5pWw5o2u6K+35rGC5byC5bi4JywKICAgIHR5cGU6ICdkYW5nZXInLAogICAgbWV0YTogewogICAgICBlcnJvcjogZXJyb3IKICAgIH0KICB9KTsgLy8g5omT5Y2w5Yiw5o6n5Yi25Y+wCgogIGlmIChwcm9jZXNzLmVudi5OT0RFX0VOViA9PT0gJ2RldmVsb3BtZW50JykgewogICAgdXRpbC5sb2cuZGFuZ2VyKCc+Pj4+Pj4gRXJyb3IgPj4+Pj4+Jyk7CiAgICBjb25zb2xlLmxvZyhlcnJvcik7CiAgfSAvLyDmmL7npLrmj5DnpLoKCgogIE1lc3NhZ2UoewogICAgbWVzc2FnZTogZXJyb3IubWVzc2FnZSwKICAgIHR5cGU6ICdlcnJvcicsCiAgICBkdXJhdGlvbjogNSAqIDEwMDAKICB9KTsKfSAvLyDliJvlu7rkuIDkuKogYXhpb3Mg5a6e5L6LCgoKdmFyIHNlcnZpY2UgPSBheGlvcy5jcmVhdGUoewogIGJhc2VVUkw6IHByb2Nlc3MuZW52LlZVRV9BUFBfQVBJLAogIHRpbWVvdXQ6IDUwMDAgLy8g6K+35rGC6LaF5pe25pe26Ze0Cgp9KTsgLy8g6K+35rGC5oum5oiq5ZmoCgpzZXJ2aWNlLmludGVyY2VwdG9ycy5yZXF1ZXN0LnVzZShmdW5jdGlvbiAoY29uZmlnKSB7CiAgLy8g5Zyo6K+35rGC5Y+R6YCB5LmL5YmN5YGa5LiA5Lqb5aSE55CGCiAgdmFyIHRva2VuID0gdXRpbC5jb29raWVzLmdldCgndG9rZW4nKTsgLy8g6K6p5q+P5Liq6K+35rGC5pC65bimdG9rZW4tLSBbJ1gtVG9rZW4nXeS4uuiHquWumuS5iWtleSDor7fmoLnmja7lrp7pmYXmg4XlhrXoh6rooYzkv67mlLkKCiAgY29uZmlnLmhlYWRlcnNbJ1gtVG9rZW4nXSA9IHRva2VuOwogIHJldHVybiBjb25maWc7Cn0sIGZ1bmN0aW9uIChlcnJvcikgewogIC8vIOWPkemAgeWksei0pQogIGNvbnNvbGUubG9nKGVycm9yKTsKICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyb3IpOwp9KTsgLy8g5ZON5bqU5oum5oiq5ZmoCgpzZXJ2aWNlLmludGVyY2VwdG9ycy5yZXNwb25zZS51c2UoZnVuY3Rpb24gKHJlc3BvbnNlKSB7CiAgLy8gZGF0YUF4aW9zIOaYryBheGlvcyDov5Tlm57mlbDmja7kuK3nmoQgZGF0YQogIHZhciBkYXRhQXhpb3MgPSByZXNwb25zZS5kYXRhOyAvLyDov5nkuKrnirbmgIHnoIHmmK/lkozlkI7nq6/nuqblrprnmoQKCiAgdmFyIHN0YXR1cyA9IGRhdGFBeGlvcy5zdGF0dXM7IC8vIOagueaNriBjb2RlIOi/m+ihjOWIpOaWrQoKICBpZiAoc3RhdHVzID09PSB1bmRlZmluZWQpIHsKICAgIC8vIOWmguaenOayoeaciSBjb2RlIOS7o+ihqOi/meS4jeaYr+mhueebruWQjuerr+W8gOWPkeeahOaOpeWPoyDmr5TlpoLlj6/og73mmK8gRDJBZG1pbiDor7fmsYLmnIDmlrDniYjmnKwKICAgIHJldHVybiBkYXRhQXhpb3M7CiAgfSBlbHNlIHsKICAgIC8vIOaciSBjb2RlIOS7o+ihqOi/meaYr+S4gOS4quWQjuerr+aOpeWPoyDlj6/ku6Xov5vooYzov5vkuIDmraXnmoTliKTmlq0KICAgIHN3aXRjaCAoc3RhdHVzKSB7CiAgICAgIGNhc2UgMDoKICAgICAgICAvLyBbIOekuuS+iyBdIGNvZGUgPT09IDAg5Luj6KGo5rKh5pyJ6ZSZ6K+vCiAgICAgICAgcmV0dXJuIGRhdGFBeGlvcy5kYXRhOwoKICAgICAgY2FzZSAyMDA6CiAgICAgICAgLy8gWyDnpLrkvosgXSDlhbblroPlkozlkI7lj7DnuqblrprnmoQgY29kZQogICAgICAgIGVycm9yQ3JlYXRlKCJbIGNvZGU6IHh4eCBdICIuY29uY2F0KGRhdGFBeGlvcy5tc2csICI6ICIpLmNvbmNhdChyZXNwb25zZS5jb25maWcudXJsKSk7CiAgICAgICAgYnJlYWs7CgogICAgICBkZWZhdWx0OgogICAgICAgIC8vIOS4jeaYr+ato+ehrueahCBjb2RlCiAgICAgICAgZXJyb3JDcmVhdGUoIiIuY29uY2F0KGRhdGFBeGlvcy5tc2csICI6ICIpLmNvbmNhdChyZXNwb25zZS5jb25maWcudXJsKSk7CiAgICAgICAgYnJlYWs7CiAgICB9CiAgfQp9LCBmdW5jdGlvbiAoZXJyb3IpIHsKICBpZiAoZXJyb3IgJiYgZXJyb3IucmVzcG9uc2UpIHsKICAgIHN3aXRjaCAoZXJyb3IucmVzcG9uc2Uuc3RhdHVzKSB7CiAgICAgIGNhc2UgNDAwOgogICAgICAgIGVycm9yLm1lc3NhZ2UgPSAn6K+35rGC6ZSZ6K+vJzsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgNDAxOgogICAgICAgIGVycm9yLm1lc3NhZ2UgPSAn5pyq5o6I5p2D77yM6K+355m75b2VJzsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgNDAzOgogICAgICAgIGVycm9yLm1lc3NhZ2UgPSAn5ouS57ud6K6/6ZeuJzsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgNDA0OgogICAgICAgIGVycm9yLm1lc3NhZ2UgPSAiXHU4QkY3XHU2QzQyXHU1NzMwXHU1NzQwXHU1MUZBXHU5NTE5OiAiLmNvbmNhdChlcnJvci5yZXNwb25zZS5jb25maWcudXJsKTsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgNDA4OgogICAgICAgIGVycm9yLm1lc3NhZ2UgPSAn6K+35rGC6LaF5pe2JzsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgNTAwOgogICAgICAgIGVycm9yLm1lc3NhZ2UgPSAn5pyN5Yqh5Zmo5YaF6YOo6ZSZ6K+vJzsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgNTAxOgogICAgICAgIGVycm9yLm1lc3NhZ2UgPSAn5pyN5Yqh5pyq5a6e546wJzsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgNTAyOgogICAgICAgIGVycm9yLm1lc3NhZ2UgPSAn572R5YWz6ZSZ6K+vJzsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgNTAzOgogICAgICAgIGVycm9yLm1lc3NhZ2UgPSAn5pyN5Yqh5LiN5Y+v55SoJzsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgNTA0OgogICAgICAgIGVycm9yLm1lc3NhZ2UgPSAn572R5YWz6LaF5pe2JzsKICAgICAgICBicmVhazsKCiAgICAgIGNhc2UgNTA1OgogICAgICAgIGVycm9yLm1lc3NhZ2UgPSAnSFRUUOeJiOacrOS4jeWPl+aUr+aMgSc7CiAgICAgICAgYnJlYWs7CgogICAgICBkZWZhdWx0OgogICAgICAgIGJyZWFrOwogICAgfQogIH0KCiAgZXJyb3JMb2coZXJyb3IpOwogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnJvcik7Cn0pOwpleHBvcnQgZGVmYXVsdCBzZXJ2aWNlOw=="},{"version":3,"sources":["D:/实践/d2-admin-start-kit-master/src/plugin/axios/index.js"],"names":["store","axios","Message","util","errorCreate","msg","error","Error","errorLog","dispatch","message","type","meta","process","env","NODE_ENV","log","danger","console","duration","service","create","baseURL","VUE_APP_API","timeout","interceptors","request","use","config","token","cookies","get","headers","Promise","reject","response","dataAxios","data","status","undefined","url"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,SAAlB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,OAAT,QAAwB,YAAxB;AACA,OAAOC,IAAP,MAAiB,aAAjB,C,CAEA;;AACA,SAASC,WAAT,CAAsBC,GAAtB,EAA2B;AACzB,MAAMC,KAAK,GAAG,IAAIC,KAAJ,CAAUF,GAAV,CAAd;AACAG,EAAAA,QAAQ,CAACF,KAAD,CAAR;AACA,QAAMA,KAAN;AACD,C,CAED;;;AACA,SAASE,QAAT,CAAmBF,KAAnB,EAA0B;AACxB;AACAN,EAAAA,KAAK,CAACS,QAAN,CAAe,kBAAf,EAAmC;AACjCC,IAAAA,OAAO,EAAE,QADwB;AAEjCC,IAAAA,IAAI,EAAE,QAF2B;AAGjCC,IAAAA,IAAI,EAAE;AACJN,MAAAA,KAAK,EAALA;AADI;AAH2B,GAAnC,EAFwB,CASxB;;AACA,MAAIO,OAAO,CAACC,GAAR,CAAYC,QAAZ,KAAyB,aAA7B,EAA4C;AAC1CZ,IAAAA,IAAI,CAACa,GAAL,CAASC,MAAT,CAAgB,qBAAhB;AACAC,IAAAA,OAAO,CAACF,GAAR,CAAYV,KAAZ;AACD,GAbuB,CAcxB;;;AACAJ,EAAAA,OAAO,CAAC;AACNQ,IAAAA,OAAO,EAAEJ,KAAK,CAACI,OADT;AAENC,IAAAA,IAAI,EAAE,OAFA;AAGNQ,IAAAA,QAAQ,EAAE,IAAI;AAHR,GAAD,CAAP;AAKD,C,CAED;;;AACA,IAAMC,OAAO,GAAGnB,KAAK,CAACoB,MAAN,CAAa;AAC3BC,EAAAA,OAAO,EAAET,OAAO,CAACC,GAAR,CAAYS,WADM;AAE3BC,EAAAA,OAAO,EAAE,IAFkB,CAEb;;AAFa,CAAb,CAAhB,C,CAKA;;AACAJ,OAAO,CAACK,YAAR,CAAqBC,OAArB,CAA6BC,GAA7B,CACE,UAAAC,MAAM,EAAI;AACR;AACA,MAAMC,KAAK,GAAG1B,IAAI,CAAC2B,OAAL,CAAaC,GAAb,CAAiB,OAAjB,CAAd,CAFQ,CAGR;;AACAH,EAAAA,MAAM,CAACI,OAAP,CAAe,SAAf,IAA4BH,KAA5B;AACA,SAAOD,MAAP;AACD,CAPH,EAQE,UAAAtB,KAAK,EAAI;AACP;AACAY,EAAAA,OAAO,CAACF,GAAR,CAAYV,KAAZ;AACA,SAAO2B,OAAO,CAACC,MAAR,CAAe5B,KAAf,CAAP;AACD,CAZH,E,CAeA;;AACAc,OAAO,CAACK,YAAR,CAAqBU,QAArB,CAA8BR,GAA9B,CACE,UAAAQ,QAAQ,EAAI;AACV;AACA,MAAMC,SAAS,GAAGD,QAAQ,CAACE,IAA3B,CAFU,CAGV;;AAHU,MAIFC,MAJE,GAISF,SAJT,CAIFE,MAJE,EAKV;;AACA,MAAIA,MAAM,KAAKC,SAAf,EAA0B;AACxB;AACA,WAAOH,SAAP;AACD,GAHD,MAGO;AACL;AACA,YAAQE,MAAR;AACE,WAAK,CAAL;AACE;AACA,eAAOF,SAAS,CAACC,IAAjB;;AACF,WAAK,GAAL;AACE;AACAjC,QAAAA,WAAW,yBAAkBgC,SAAS,CAAC/B,GAA5B,eAAoC8B,QAAQ,CAACP,MAAT,CAAgBY,GAApD,EAAX;AACA;;AACF;AACE;AACApC,QAAAA,WAAW,WAAIgC,SAAS,CAAC/B,GAAd,eAAsB8B,QAAQ,CAACP,MAAT,CAAgBY,GAAtC,EAAX;AACA;AAXJ;AAaD;AACF,CA1BH,EA2BE,UAAAlC,KAAK,EAAI;AACP,MAAIA,KAAK,IAAIA,KAAK,CAAC6B,QAAnB,EAA6B;AAC3B,YAAQ7B,KAAK,CAAC6B,QAAN,CAAeG,MAAvB;AACE,WAAK,GAAL;AAAUhC,QAAAA,KAAK,CAACI,OAAN,GAAgB,MAAhB;AAAwB;;AAClC,WAAK,GAAL;AAAUJ,QAAAA,KAAK,CAACI,OAAN,GAAgB,SAAhB;AAA2B;;AACrC,WAAK,GAAL;AAAUJ,QAAAA,KAAK,CAACI,OAAN,GAAgB,MAAhB;AAAwB;;AAClC,WAAK,GAAL;AAAUJ,QAAAA,KAAK,CAACI,OAAN,mDAA2BJ,KAAK,CAAC6B,QAAN,CAAeP,MAAf,CAAsBY,GAAjD;AAAwD;;AAClE,WAAK,GAAL;AAAUlC,QAAAA,KAAK,CAACI,OAAN,GAAgB,MAAhB;AAAwB;;AAClC,WAAK,GAAL;AAAUJ,QAAAA,KAAK,CAACI,OAAN,GAAgB,SAAhB;AAA2B;;AACrC,WAAK,GAAL;AAAUJ,QAAAA,KAAK,CAACI,OAAN,GAAgB,OAAhB;AAAyB;;AACnC,WAAK,GAAL;AAAUJ,QAAAA,KAAK,CAACI,OAAN,GAAgB,MAAhB;AAAwB;;AAClC,WAAK,GAAL;AAAUJ,QAAAA,KAAK,CAACI,OAAN,GAAgB,OAAhB;AAAyB;;AACnC,WAAK,GAAL;AAAUJ,QAAAA,KAAK,CAACI,OAAN,GAAgB,MAAhB;AAAwB;;AAClC,WAAK,GAAL;AAAUJ,QAAAA,KAAK,CAACI,OAAN,GAAgB,YAAhB;AAA8B;;AACxC;AAAS;AAZX;AAcD;;AACDF,EAAAA,QAAQ,CAACF,KAAD,CAAR;AACA,SAAO2B,OAAO,CAACC,MAAR,CAAe5B,KAAf,CAAP;AACD,CA9CH;AAiDA,eAAec,OAAf","sourcesContent":["import store from '@/store'\nimport axios from 'axios'\nimport { Message } from 'element-ui'\nimport util from '@/libs/util'\n\n// 创建一个错误\nfunction errorCreate (msg) {\n  const error = new Error(msg)\n  errorLog(error)\n  throw error\n}\n\n// 记录和显示错误\nfunction errorLog (error) {\n  // 添加到日志\n  store.dispatch('d2admin/log/push', {\n    message: '数据请求异常',\n    type: 'danger',\n    meta: {\n      error\n    }\n  })\n  // 打印到控制台\n  if (process.env.NODE_ENV === 'development') {\n    util.log.danger('>>>>>> Error >>>>>>')\n    console.log(error)\n  }\n  // 显示提示\n  Message({\n    message: error.message,\n    type: 'error',\n    duration: 5 * 1000\n  })\n}\n\n// 创建一个 axios 实例\nconst service = axios.create({\n  baseURL: process.env.VUE_APP_API,\n  timeout: 5000 // 请求超时时间\n})\n\n// 请求拦截器\nservice.interceptors.request.use(\n  config => {\n    // 在请求发送之前做一些处理\n    const token = util.cookies.get('token')\n    // 让每个请求携带token-- ['X-Token']为自定义key 请根据实际情况自行修改\n    config.headers['X-Token'] = token\n    return config\n  },\n  error => {\n    // 发送失败\n    console.log(error)\n    return Promise.reject(error)\n  }\n)\n\n// 响应拦截器\nservice.interceptors.response.use(\n  response => {\n    // dataAxios 是 axios 返回数据中的 data\n    const dataAxios = response.data\n    // 这个状态码是和后端约定的\n    const { status } = dataAxios\n    // 根据 code 进行判断\n    if (status === undefined) {\n      // 如果没有 code 代表这不是项目后端开发的接口 比如可能是 D2Admin 请求最新版本\n      return dataAxios\n    } else {\n      // 有 code 代表这是一个后端接口 可以进行进一步的判断\n      switch (status) {\n        case 0:\n          // [ 示例 ] code === 0 代表没有错误\n          return dataAxios.data\n        case 200:\n          // [ 示例 ] 其它和后台约定的 code\n          errorCreate(`[ code: xxx ] ${dataAxios.msg}: ${response.config.url}`)\n          break\n        default:\n          // 不是正确的 code\n          errorCreate(`${dataAxios.msg}: ${response.config.url}`)\n          break\n      }\n    }\n  },\n  error => {\n    if (error && error.response) {\n      switch (error.response.status) {\n        case 400: error.message = '请求错误'; break\n        case 401: error.message = '未授权，请登录'; break\n        case 403: error.message = '拒绝访问'; break\n        case 404: error.message = `请求地址出错: ${error.response.config.url}`; break\n        case 408: error.message = '请求超时'; break\n        case 500: error.message = '服务器内部错误'; break\n        case 501: error.message = '服务未实现'; break\n        case 502: error.message = '网关错误'; break\n        case 503: error.message = '服务不可用'; break\n        case 504: error.message = '网关超时'; break\n        case 505: error.message = 'HTTP版本不受支持'; break\n        default: break\n      }\n    }\n    errorLog(error)\n    return Promise.reject(error)\n  }\n)\n\nexport default service\n"]}]}