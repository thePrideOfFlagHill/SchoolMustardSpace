{"remainingRequest":"C:\\Users\\58215\\Desktop\\SchoolMustardSpace\\Html (front for user)\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\58215\\Desktop\\SchoolMustardSpace\\Html (front for user)\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\58215\\Desktop\\SchoolMustardSpace\\Html (front for user)\\src\\store\\modules\\d2admin\\modules\\page.js","dependencies":[{"path":"C:\\Users\\58215\\Desktop\\SchoolMustardSpace\\Html (front for user)\\src\\store\\modules\\d2admin\\modules\\page.js","mtime":1590487885000},{"path":"C:\\Users\\58215\\Desktop\\SchoolMustardSpace\\Html (front for user)\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\58215\\Desktop\\SchoolMustardSpace\\Html (front for user)\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\58215\\Desktop\\SchoolMustardSpace\\Html (front for user)\\node_modules\\eslint-loader\\index.js","mtime":1588755592739}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmluZCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LmZpbmQtaW5kZXgiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5hcnJheS5mb3ItZWFjaCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5Lm1hcCI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnNwbGljZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmZ1bmN0aW9uLm5hbWUiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy9lcy5vYmplY3QudG8tc3RyaW5nIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvd2ViLmRvbS1jb2xsZWN0aW9ucy5mb3ItZWFjaCI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lIjsKaW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIkM6L1VzZXJzLzU4MjE1L0Rlc2t0b3AvU2Nob29sTXVzdGFyZFNwYWNlL0h0bWwgKGZyb250IGZvciB1c2VyKS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCB7IGNsb25lRGVlcCwgdW5pcSwgZ2V0IH0gZnJvbSAnbG9kYXNoJzsKaW1wb3J0IHJvdXRlciBmcm9tICdAL3JvdXRlcic7CmltcG9ydCBzZXR0aW5nIGZyb20gJ0Avc2V0dGluZy5qcyc7IC8vIOWIpOWumuaYr+WQpumcgOimgee8k+WtmAoKdmFyIGlzS2VlcEFsaXZlID0gZnVuY3Rpb24gaXNLZWVwQWxpdmUoZGF0YSkgewogIHJldHVybiBnZXQoZGF0YSwgJ21ldGEuY2FjaGUnLCBmYWxzZSk7Cn07CgpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZXNwYWNlZDogdHJ1ZSwKICBzdGF0ZTogewogICAgLy8g5Y+v5Lul5Zyo5aSa6aG1IHRhYiDmqKHlvI/kuIvmmL7npLrnmoTpobXpnaIKICAgIHBvb2w6IFtdLAogICAgLy8g5b2T5YmN5pi+56S655qE5aSa6aG16Z2i5YiX6KGoCiAgICBvcGVuZWQ6IGdldChzZXR0aW5nLCAncGFnZS5vcGVuZWQnLCBbXSksCiAgICAvLyDlt7Lnu4/liqDovb3lpJrmoIfnrb7pobXmlbDmja4gaHR0cHM6Ly9naXRodWIuY29tL2QyLXByb2plY3RzL2QyLWFkbWluL2lzc3Vlcy8yMDEKICAgIG9wZW5lZExvYWRlZDogZmFsc2UsCiAgICAvLyDlvZPliY3pobXpnaIKICAgIGN1cnJlbnQ6ICcnLAogICAgLy8g6ZyA6KaB57yT5a2Y55qE6aG16Z2iIG5hbWUKICAgIGtlZXBBbGl2ZTogW10KICB9LAogIGFjdGlvbnM6IHsKICAgIC8qKgogICAgICogQGRlc2NyaXB0aW9uIOehruiupOW3sue7j+WKoOi9veWkmuagh+etvumhteaVsOaNriBodHRwczovL2dpdGh1Yi5jb20vZDItcHJvamVjdHMvZDItYWRtaW4vaXNzdWVzLzIwMQogICAgICogQHBhcmFtIHtPYmplY3R9IGNvbnRleHQKICAgICAqLwogICAgaXNMb2FkZWQ6IGZ1bmN0aW9uIGlzTG9hZGVkKF9yZWYpIHsKICAgICAgdmFyIHN0YXRlID0gX3JlZi5zdGF0ZTsKICAgICAgaWYgKHN0YXRlLm9wZW5lZExvYWRlZCkgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpOwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICB2YXIgdGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBpZiAoc3RhdGUub3BlbmVkTG9hZGVkKSByZXNvbHZlKGNsZWFySW50ZXJ2YWwodGltZXIpKTsKICAgICAgICB9LCAxMCk7CiAgICAgIH0pOwogICAgfSwKCiAgICAvKioKICAgICAqIEBjbGFzcyBvcGVuZWQKICAgICAqIEBkZXNjcmlwdGlvbiDku47mjIHkuYXljJbmlbDmja7ovb3lhaXmoIfnrb7pobXliJfooagKICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjb250ZXh0CiAgICAgKi8KICAgIG9wZW5lZExvYWQ6IGZ1bmN0aW9uIG9wZW5lZExvYWQoX3JlZjIpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICB2YXIgc3RhdGUsIGNvbW1pdCwgZGlzcGF0Y2gsIHZhbHVlLCB2YWxpZDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBzdGF0ZSA9IF9yZWYyLnN0YXRlLCBjb21taXQgPSBfcmVmMi5jb21taXQsIGRpc3BhdGNoID0gX3JlZjIuZGlzcGF0Y2g7CiAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMzsKICAgICAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaCgnZDJhZG1pbi9kYi9nZXQnLCB7CiAgICAgICAgICAgICAgICAgIGRiTmFtZTogJ3N5cycsCiAgICAgICAgICAgICAgICAgIHBhdGg6ICdwYWdlLm9wZW5lZCcsCiAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogc2V0dGluZy5wYWdlLm9wZW5lZCwKICAgICAgICAgICAgICAgICAgdXNlcjogdHJ1ZQogICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgY2FzZSAzOgogICAgICAgICAgICAgICAgdmFsdWUgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgLy8g5Zyo5aSE55CG5Ye95pWw5Lit6L+b6KGM5pWw5o2u5LyY5YyWIOi/h+a7pOaOieeOsOWcqOW3sue7j+WkseaViOeahOmhteetvuaIluiAheW3sue7j+aUueWPmOS6huS/oeaBr+eahOmhteetvgogICAgICAgICAgICAgICAgLy8g5LulIGZ1bGxQYXRoIOWtl+auteS4uuWHhgogICAgICAgICAgICAgICAgLy8g5aaC5p6c6aG16Z2i6L+H5aSa55qE6K+d5Y+v6IO96ZyA6KaB5LyY5YyW566X5rOVCiAgICAgICAgICAgICAgICAvLyB2YWxpZCDmnInmlYjliJfooaggMSwgMSwgMCwgMSA9PiDmnInmlYgsIOacieaViCwg5aSx5pWILCDmnInmlYgKICAgICAgICAgICAgICAgIHZhbGlkID0gW107IC8vIOWkhOeQhuaVsOaNrgoKICAgICAgICAgICAgICAgIHN0YXRlLm9wZW5lZCA9IHZhbHVlLm1hcChmdW5jdGlvbiAob3BlbmVkKSB7CiAgICAgICAgICAgICAgICAgIC8vIOW/veeVpemmlumhtQogICAgICAgICAgICAgICAgICBpZiAob3BlbmVkLmZ1bGxQYXRoID09PSAnL2luZGV4JykgewogICAgICAgICAgICAgICAgICAgIHZhbGlkLnB1c2goMSk7CiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG9wZW5lZDsKICAgICAgICAgICAgICAgICAgfSAvLyDlsJ3or5XlnKjmiYDmnInnmoTmlK/mjIHlpJrmoIfnrb7pobXnmoTpobXpnaLph4zmib7liLAgbmFtZSDljLnphY3nmoTpobXpnaIKCgogICAgICAgICAgICAgICAgICB2YXIgZmluZCA9IHN0YXRlLnBvb2wuZmluZChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgICAgICAgICAgICAgIHJldHVybiBpdGVtLm5hbWUgPT09IG9wZW5lZC5uYW1lOwogICAgICAgICAgICAgICAgICB9KTsgLy8g6K6w5b2V5pyJ5pWI5oiW5peg5pWI5L+h5oGvCgogICAgICAgICAgICAgICAgICB2YWxpZC5wdXNoKGZpbmQgPyAxIDogMCk7IC8vIOi/lOWbnuWQiOW5tuWQjueahOaVsOaNriDmlrDnmoTopobnm5bml6fnmoQKICAgICAgICAgICAgICAgICAgLy8g5paw55qE5pWw5o2u5Lit5LiA6Iis5LiN5Lya5pC65bimIHBhcmFtcyDlkowgcXVlcnksIOaJgOS7peaXp+eahOWPguaVsOS8mueVmeWtmAoKICAgICAgICAgICAgICAgICAgcmV0dXJuIE9iamVjdC5hc3NpZ24oe30sIG9wZW5lZCwgZmluZCk7CiAgICAgICAgICAgICAgICB9KS5maWx0ZXIoZnVuY3Rpb24gKG9wZW5lZCwgaW5kZXgpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHZhbGlkW2luZGV4XSA9PT0gMTsKICAgICAgICAgICAgICAgIH0pOyAvLyDmoIforrDlt7Lnu4/liqDovb3lpJrmoIfnrb7pobXmlbDmja4gaHR0cHM6Ly9naXRodWIuY29tL2QyLXByb2plY3RzL2QyLWFkbWluL2lzc3Vlcy8yMDEKCiAgICAgICAgICAgICAgICBzdGF0ZS5vcGVuZWRMb2FkZWQgPSB0cnVlOyAvLyDmoLnmja4gb3BlbmVkIOaVsOaNrueUn+aIkOe8k+WtmOiuvue9rgoKICAgICAgICAgICAgICAgIGNvbW1pdCgna2VlcEFsaXZlUmVmcmVzaCcpOwoKICAgICAgICAgICAgICBjYXNlIDg6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgfSkpKCk7CiAgICB9LAoKICAgIC8qKgogICAgICog5bCGIG9wZW5lZCDlsZ7mgKfotYvlgLzlubbmjIHkuYXljJYg5Zyo6L+Z5LmL5YmN6K+35YWI56Gu5L+d5bey57uP5pu05paw5LqGIHN0YXRlLm9wZW5lZAogICAgICogQHBhcmFtIHtPYmplY3R9IGNvbnRleHQKICAgICAqLwogICAgb3BlbmVkMmRiOiBmdW5jdGlvbiBvcGVuZWQyZGIoX3JlZjMpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIoKSB7CiAgICAgICAgdmFyIHN0YXRlLCBkaXNwYXRjaDsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTIkKF9jb250ZXh0MikgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgc3RhdGUgPSBfcmVmMy5zdGF0ZSwgZGlzcGF0Y2ggPSBfcmVmMy5kaXNwYXRjaDsKICAgICAgICAgICAgICAgIC8vIOiuvue9ruaVsOaNrgogICAgICAgICAgICAgICAgZGlzcGF0Y2goJ2QyYWRtaW4vZGIvc2V0JywgewogICAgICAgICAgICAgICAgICBkYk5hbWU6ICdzeXMnLAogICAgICAgICAgICAgICAgICBwYXRoOiAncGFnZS5vcGVuZWQnLAogICAgICAgICAgICAgICAgICB2YWx1ZTogc3RhdGUub3BlbmVkLAogICAgICAgICAgICAgICAgICB1c2VyOiB0cnVlCiAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICB9KSkoKTsKICAgIH0sCgogICAgLyoqCiAgICAgKiBAY2xhc3Mgb3BlbmVkCiAgICAgKiBAZGVzY3JpcHRpb24g5pu05paw6aG16Z2i5YiX6KGo5LiK55qE5p+Q5LiA6aG5CiAgICAgKiBAcGFyYW0ge09iamVjdH0gY29udGV4dAogICAgICogQHBhcmFtIHtPYmplY3R9IHBheWxvYWQgeyBpbmRleCwgcGFyYW1zLCBxdWVyeSwgZnVsbFBhdGggfSDot6/nlLHkv6Hmga8KICAgICAqLwogICAgb3BlbmVkVXBkYXRlOiBmdW5jdGlvbiBvcGVuZWRVcGRhdGUoX3JlZjQsIF9yZWY1KSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUzKCkgewogICAgICAgIHZhciBzdGF0ZSwgY29tbWl0LCBkaXNwYXRjaCwgaW5kZXgsIHBhcmFtcywgcXVlcnksIGZ1bGxQYXRoLCBwYWdlOwogICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMyQoX2NvbnRleHQzKSB7CiAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0My5wcmV2ID0gX2NvbnRleHQzLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBzdGF0ZSA9IF9yZWY0LnN0YXRlLCBjb21taXQgPSBfcmVmNC5jb21taXQsIGRpc3BhdGNoID0gX3JlZjQuZGlzcGF0Y2g7CiAgICAgICAgICAgICAgICBpbmRleCA9IF9yZWY1LmluZGV4LCBwYXJhbXMgPSBfcmVmNS5wYXJhbXMsIHF1ZXJ5ID0gX3JlZjUucXVlcnksIGZ1bGxQYXRoID0gX3JlZjUuZnVsbFBhdGg7CiAgICAgICAgICAgICAgICAvLyDmm7TmlrDpobXpnaLliJfooajmn5DkuIDpobkKICAgICAgICAgICAgICAgIHBhZ2UgPSBzdGF0ZS5vcGVuZWRbaW5kZXhdOwogICAgICAgICAgICAgICAgcGFnZS5wYXJhbXMgPSBwYXJhbXMgfHwgcGFnZS5wYXJhbXM7CiAgICAgICAgICAgICAgICBwYWdlLnF1ZXJ5ID0gcXVlcnkgfHwgcGFnZS5xdWVyeTsKICAgICAgICAgICAgICAgIHBhZ2UuZnVsbFBhdGggPSBmdWxsUGF0aCB8fCBwYWdlLmZ1bGxQYXRoOwogICAgICAgICAgICAgICAgc3RhdGUub3BlbmVkLnNwbGljZShpbmRleCwgMSwgcGFnZSk7IC8vIOaMgeS5heWMlgoKICAgICAgICAgICAgICAgIF9jb250ZXh0My5uZXh0ID0gOTsKICAgICAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaCgnb3BlbmVkMmRiJyk7CgogICAgICAgICAgICAgIGNhc2UgOToKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0My5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlMyk7CiAgICAgIH0pKSgpOwogICAgfSwKCiAgICAvKioKICAgICAqIEBjbGFzcyBvcGVuZWQKICAgICAqIEBkZXNjcmlwdGlvbiDph43mjpLpobXpnaLliJfooajkuIrnmoTmn5DkuIDpobkKICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjb250ZXh0CiAgICAgKiBAcGFyYW0ge09iamVjdH0gcGF5bG9hZCB7IG9sZEluZGV4LCBuZXdJbmRleCB9IOS9jee9ruS/oeaBrwogICAgICovCiAgICBvcGVuZWRTb3J0OiBmdW5jdGlvbiBvcGVuZWRTb3J0KF9yZWY2LCBfcmVmNykgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNCgpIHsKICAgICAgICB2YXIgc3RhdGUsIGNvbW1pdCwgZGlzcGF0Y2gsIG9sZEluZGV4LCBuZXdJbmRleCwgcGFnZTsKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTQkKF9jb250ZXh0NCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDQucHJldiA9IF9jb250ZXh0NC5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgc3RhdGUgPSBfcmVmNi5zdGF0ZSwgY29tbWl0ID0gX3JlZjYuY29tbWl0LCBkaXNwYXRjaCA9IF9yZWY2LmRpc3BhdGNoOwogICAgICAgICAgICAgICAgb2xkSW5kZXggPSBfcmVmNy5vbGRJbmRleCwgbmV3SW5kZXggPSBfcmVmNy5uZXdJbmRleDsKICAgICAgICAgICAgICAgIC8vIOmHjeaOkumhtemdouWIl+ihqOafkOS4gOmhuQogICAgICAgICAgICAgICAgcGFnZSA9IHN0YXRlLm9wZW5lZFtvbGRJbmRleF07CiAgICAgICAgICAgICAgICBzdGF0ZS5vcGVuZWQuc3BsaWNlKG9sZEluZGV4LCAxKTsKICAgICAgICAgICAgICAgIHN0YXRlLm9wZW5lZC5zcGxpY2UobmV3SW5kZXgsIDAsIHBhZ2UpOyAvLyDmjIHkuYXljJYKCiAgICAgICAgICAgICAgICBfY29udGV4dDQubmV4dCA9IDc7CiAgICAgICAgICAgICAgICByZXR1cm4gZGlzcGF0Y2goJ29wZW5lZDJkYicpOwoKICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDQuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTQpOwogICAgICB9KSkoKTsKICAgIH0sCgogICAgLyoqCiAgICAgKiBAY2xhc3Mgb3BlbmVkCiAgICAgKiBAZGVzY3JpcHRpb24g5paw5aKe5LiA5LiqIHRhZyAo5omT5byA5LiA5Liq6aG16Z2iKQogICAgICogQHBhcmFtIHtPYmplY3R9IGNvbnRleHQKICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwYXlsb2FkIG5ldyB0YWcgaW5mbwogICAgICovCiAgICBhZGQ6IGZ1bmN0aW9uIGFkZChfcmVmOCwgX3JlZjkpIHsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTUoKSB7CiAgICAgICAgdmFyIHN0YXRlLCBjb21taXQsIGRpc3BhdGNoLCB0YWcsIHBhcmFtcywgcXVlcnksIGZ1bGxQYXRoLCBuZXdUYWc7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU1JChfY29udGV4dDUpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ1LnByZXYgPSBfY29udGV4dDUubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHN0YXRlID0gX3JlZjguc3RhdGUsIGNvbW1pdCA9IF9yZWY4LmNvbW1pdCwgZGlzcGF0Y2ggPSBfcmVmOC5kaXNwYXRjaDsKICAgICAgICAgICAgICAgIHRhZyA9IF9yZWY5LnRhZywgcGFyYW1zID0gX3JlZjkucGFyYW1zLCBxdWVyeSA9IF9yZWY5LnF1ZXJ5LCBmdWxsUGF0aCA9IF9yZWY5LmZ1bGxQYXRoOwogICAgICAgICAgICAgICAgLy8g6K6+572u5paw55qEIHRhZyDlnKjmlrDmiZPlvIDkuIDkuKrku6XliY3msqHmiZPlvIDov4fnmoTpobXpnaLml7bkvb/nlKgKICAgICAgICAgICAgICAgIG5ld1RhZyA9IHRhZzsKICAgICAgICAgICAgICAgIG5ld1RhZy5wYXJhbXMgPSBwYXJhbXMgfHwgbmV3VGFnLnBhcmFtczsKICAgICAgICAgICAgICAgIG5ld1RhZy5xdWVyeSA9IHF1ZXJ5IHx8IG5ld1RhZy5xdWVyeTsKICAgICAgICAgICAgICAgIG5ld1RhZy5mdWxsUGF0aCA9IGZ1bGxQYXRoIHx8IG5ld1RhZy5mdWxsUGF0aDsgLy8g5re75Yqg6L+b5b2T5YmN5pi+56S655qE6aG16Z2i5pWw57uECgogICAgICAgICAgICAgICAgc3RhdGUub3BlbmVkLnB1c2gobmV3VGFnKTsgLy8g5aaC5p6c6L+Z5Liq6aG16Z2i6ZyA6KaB57yT5a2YIOWwhuWFtua3u+WKoOWIsOe8k+WtmOiuvue9rgoKICAgICAgICAgICAgICAgIGlmIChpc0tlZXBBbGl2ZShuZXdUYWcpKSBjb21taXQoJ2tlZXBBbGl2ZVB1c2gnLCB0YWcubmFtZSk7IC8vIOaMgeS5heWMlgoKICAgICAgICAgICAgICAgIF9jb250ZXh0NS5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICByZXR1cm4gZGlzcGF0Y2goJ29wZW5lZDJkYicpOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ1LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU1KTsKICAgICAgfSkpKCk7CiAgICB9LAoKICAgIC8qKgogICAgICogQGNsYXNzIGN1cnJlbnQKICAgICAqIEBkZXNjcmlwdGlvbiDmiZPlvIDkuIDkuKrmlrDnmoTpobXpnaIKICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjb250ZXh0CiAgICAgKiBAcGFyYW0ge09iamVjdH0gcGF5bG9hZCDku47ot6/nlLHpkqnlrZDnmoQgdG8g5a+56LGh5LiK6I635Y+WIHsgbmFtZSwgcGFyYW1zLCBxdWVyeSwgZnVsbFBhdGgsIG1ldGEgfSDot6/nlLHkv6Hmga8KICAgICAqLwogICAgb3BlbjogZnVuY3Rpb24gb3BlbihfcmVmMTAsIF9yZWYxMSkgewogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlNigpIHsKICAgICAgICB2YXIgc3RhdGUsIGNvbW1pdCwgZGlzcGF0Y2gsIG5hbWUsIHBhcmFtcywgcXVlcnksIGZ1bGxQYXRoLCBtZXRhLCBvcGVuZWQsIHBhZ2VPcGVuZEluZGV4LCBwYWdlT3BlbmQsIHBhZ2U7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU2JChfY29udGV4dDYpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ2LnByZXYgPSBfY29udGV4dDYubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHN0YXRlID0gX3JlZjEwLnN0YXRlLCBjb21taXQgPSBfcmVmMTAuY29tbWl0LCBkaXNwYXRjaCA9IF9yZWYxMC5kaXNwYXRjaDsKICAgICAgICAgICAgICAgIG5hbWUgPSBfcmVmMTEubmFtZSwgcGFyYW1zID0gX3JlZjExLnBhcmFtcywgcXVlcnkgPSBfcmVmMTEucXVlcnksIGZ1bGxQYXRoID0gX3JlZjExLmZ1bGxQYXRoLCBtZXRhID0gX3JlZjExLm1ldGE7CiAgICAgICAgICAgICAgICAvLyDlt7Lnu4/miZPlvIDnmoTpobXpnaIKICAgICAgICAgICAgICAgIG9wZW5lZCA9IHN0YXRlLm9wZW5lZDsgLy8g5Yik5pat5q2k6aG16Z2i5piv5ZCm5bey57uP5omT5byAIOW5tuS4lOiusOW9leS9jee9rgoKICAgICAgICAgICAgICAgIHBhZ2VPcGVuZEluZGV4ID0gMDsKICAgICAgICAgICAgICAgIHBhZ2VPcGVuZCA9IG9wZW5lZC5maW5kKGZ1bmN0aW9uIChwYWdlLCBpbmRleCkgewogICAgICAgICAgICAgICAgICB2YXIgc2FtZSA9IHBhZ2UuZnVsbFBhdGggPT09IGZ1bGxQYXRoOwogICAgICAgICAgICAgICAgICBwYWdlT3BlbmRJbmRleCA9IHNhbWUgPyBpbmRleCA6IHBhZ2VPcGVuZEluZGV4OwogICAgICAgICAgICAgICAgICByZXR1cm4gc2FtZTsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGlmICghcGFnZU9wZW5kKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gODsKICAgICAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaCgnb3BlbmVkVXBkYXRlJywgewogICAgICAgICAgICAgICAgICBpbmRleDogcGFnZU9wZW5kSW5kZXgsCiAgICAgICAgICAgICAgICAgIHBhcmFtczogcGFyYW1zLAogICAgICAgICAgICAgICAgICBxdWVyeTogcXVlcnksCiAgICAgICAgICAgICAgICAgIGZ1bGxQYXRoOiBmdWxsUGF0aAogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgODoKICAgICAgICAgICAgICAgIF9jb250ZXh0Ni5uZXh0ID0gMTQ7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxMDoKICAgICAgICAgICAgICAgIC8vIOmhtemdouS7peWJjeayoeacieaJk+W8gOi/hwogICAgICAgICAgICAgICAgcGFnZSA9IHN0YXRlLnBvb2wuZmluZChmdW5jdGlvbiAodCkgewogICAgICAgICAgICAgICAgICByZXR1cm4gdC5uYW1lID09PSBuYW1lOwogICAgICAgICAgICAgICAgfSk7IC8vIOWmguaenOi/memHjOayoeacieaJvuWIsCBwYWdlIOS7o+ihqOi/meS4qui3r+eUseiZveeEtuWcqOahhuaetuWGhSDkvYbmmK/kuI3lj4LkuI7moIfnrb7pobXmmL7npLoKCiAgICAgICAgICAgICAgICBpZiAoIXBhZ2UpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAxNDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQ2Lm5leHQgPSAxNDsKICAgICAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaCgnYWRkJywgewogICAgICAgICAgICAgICAgICB0YWc6IE9iamVjdC5hc3NpZ24oe30sIHBhZ2UpLAogICAgICAgICAgICAgICAgICBwYXJhbXM6IHBhcmFtcywKICAgICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5LAogICAgICAgICAgICAgICAgICBmdWxsUGF0aDogZnVsbFBhdGgKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgLy8g5aaC5p6c6L+Z5Liq6aG16Z2i6ZyA6KaB57yT5a2YIOWwhuWFtua3u+WKoOWIsOe8k+WtmOiuvue9rgogICAgICAgICAgICAgICAgaWYgKGlzS2VlcEFsaXZlKHsKICAgICAgICAgICAgICAgICAgbWV0YTogbWV0YQogICAgICAgICAgICAgICAgfSkpIGNvbW1pdCgna2VlcEFsaXZlUHVzaCcsIG5hbWUpOyAvLyDorr7nva7lvZPliY3nmoTpobXpnaIKCiAgICAgICAgICAgICAgICBjb21taXQoJ2N1cnJlbnRTZXQnLCBmdWxsUGF0aCk7CgogICAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDYuc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTYpOwogICAgICB9KSkoKTsKICAgIH0sCgogICAgLyoqCiAgICAgKiBAY2xhc3Mgb3BlbmVkCiAgICAgKiBAZGVzY3JpcHRpb24g5YWz6Zet5LiA5LiqIHRhZyAo5YWz6Zet5LiA5Liq6aG16Z2iKQogICAgICogQHBhcmFtIHtPYmplY3R9IGNvbnRleHQKICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwYXlsb2FkIHsgdGFnTmFtZTog6KaB5YWz6Zet55qE5qCH562+5ZCN5a2XIH0KICAgICAqLwogICAgY2xvc2U6IGZ1bmN0aW9uIGNsb3NlKF9yZWYxMiwgX3JlZjEzKSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWU3KCkgewogICAgICAgIHZhciBzdGF0ZSwgY29tbWl0LCBkaXNwYXRjaCwgdGFnTmFtZSwgbmV3UGFnZSwgaXNDdXJyZW50LCBsZW4sIGksIGluZGV4LCBfbmV3UGFnZSwgX25ld1BhZ2UkbmFtZSwgbmFtZSwgX25ld1BhZ2UkcGFyYW1zLCBwYXJhbXMsIF9uZXdQYWdlJHF1ZXJ5LCBxdWVyeSwgcm91dGVyT2JqOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTckKF9jb250ZXh0NykgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDcucHJldiA9IF9jb250ZXh0Ny5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgc3RhdGUgPSBfcmVmMTIuc3RhdGUsIGNvbW1pdCA9IF9yZWYxMi5jb21taXQsIGRpc3BhdGNoID0gX3JlZjEyLmRpc3BhdGNoOwogICAgICAgICAgICAgICAgdGFnTmFtZSA9IF9yZWYxMy50YWdOYW1lOwogICAgICAgICAgICAgICAgLy8g6aKE5a6a5LiL5Liq5paw6aG16Z2iCiAgICAgICAgICAgICAgICBuZXdQYWdlID0ge307CiAgICAgICAgICAgICAgICBpc0N1cnJlbnQgPSBzdGF0ZS5jdXJyZW50ID09PSB0YWdOYW1lOyAvLyDlpoLmnpzlhbPpl63nmoTpobXpnaLlsLHmmK/lvZPliY3mmL7npLrnmoTpobXpnaIKCiAgICAgICAgICAgICAgICBpZiAoIWlzQ3VycmVudCkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDE0OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvLyDljrvmib7kuIDkuKrmlrDnmoTpobXpnaIKICAgICAgICAgICAgICAgIGxlbiA9IHN0YXRlLm9wZW5lZC5sZW5ndGg7CiAgICAgICAgICAgICAgICBpID0gMDsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgaWYgKCEoaSA8IGxlbikpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAxNDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKCEoc3RhdGUub3BlbmVkW2ldLmZ1bGxQYXRoID09PSB0YWdOYW1lKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDExOwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBuZXdQYWdlID0gaSA8IGxlbiAtIDEgPyBzdGF0ZS5vcGVuZWRbaSArIDFdIDogc3RhdGUub3BlbmVkW2kgLSAxXTsKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDcuYWJydXB0KCJicmVhayIsIDE0KTsKCiAgICAgICAgICAgICAgY2FzZSAxMToKICAgICAgICAgICAgICAgIGkrKzsKICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gNzsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDE0OgogICAgICAgICAgICAgICAgLy8g5om+5Yiw6L+Z5Liq6aG16Z2i5Zyo5bey57uP5omT5byA55qE5pWw5o2u6YeM5piv56ys5Yeg5LiqCiAgICAgICAgICAgICAgICBpbmRleCA9IHN0YXRlLm9wZW5lZC5maW5kSW5kZXgoZnVuY3Rpb24gKHBhZ2UpIHsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHBhZ2UuZnVsbFBhdGggPT09IHRhZ05hbWU7CiAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPj0gMCkgewogICAgICAgICAgICAgICAgICAvLyDlpoLmnpzov5nkuKrpobXpnaLmmK/nvJPlrZjnmoTpobXpnaIg5bCG5YW25Zyo57yT5a2Y6K6+572u5Lit5Yig6ZmkCiAgICAgICAgICAgICAgICAgIGNvbW1pdCgna2VlcEFsaXZlUmVtb3ZlJywgc3RhdGUub3BlbmVkW2luZGV4XS5uYW1lKTsgLy8g5pu05paw5pWw5o2uIOWIoOmZpOWFs+mXreeahOmhtemdogoKICAgICAgICAgICAgICAgICAgc3RhdGUub3BlbmVkLnNwbGljZShpbmRleCwgMSk7CiAgICAgICAgICAgICAgICB9IC8vIOaMgeS5heWMlgoKCiAgICAgICAgICAgICAgICBfY29udGV4dDcubmV4dCA9IDE4OwogICAgICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoKCdvcGVuZWQyZGInKTsKCiAgICAgICAgICAgICAgY2FzZSAxODoKICAgICAgICAgICAgICAgIGlmICghaXNDdXJyZW50KSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Ny5uZXh0ID0gMjM7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9uZXdQYWdlID0gbmV3UGFnZSwgX25ld1BhZ2UkbmFtZSA9IF9uZXdQYWdlLm5hbWUsIG5hbWUgPSBfbmV3UGFnZSRuYW1lID09PSB2b2lkIDAgPyAnaW5kZXgnIDogX25ld1BhZ2UkbmFtZSwgX25ld1BhZ2UkcGFyYW1zID0gX25ld1BhZ2UucGFyYW1zLCBwYXJhbXMgPSBfbmV3UGFnZSRwYXJhbXMgPT09IHZvaWQgMCA/IHt9IDogX25ld1BhZ2UkcGFyYW1zLCBfbmV3UGFnZSRxdWVyeSA9IF9uZXdQYWdlLnF1ZXJ5LCBxdWVyeSA9IF9uZXdQYWdlJHF1ZXJ5ID09PSB2b2lkIDAgPyB7fSA6IF9uZXdQYWdlJHF1ZXJ5OwogICAgICAgICAgICAgICAgcm91dGVyT2JqID0gewogICAgICAgICAgICAgICAgICBuYW1lOiBuYW1lLAogICAgICAgICAgICAgICAgICBwYXJhbXM6IHBhcmFtcywKICAgICAgICAgICAgICAgICAgcXVlcnk6IHF1ZXJ5CiAgICAgICAgICAgICAgICB9OwogICAgICAgICAgICAgICAgX2NvbnRleHQ3Lm5leHQgPSAyMzsKICAgICAgICAgICAgICAgIHJldHVybiByb3V0ZXIucHVzaChyb3V0ZXJPYmopOwoKICAgICAgICAgICAgICBjYXNlIDIzOgogICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQ3LnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWU3KTsKICAgICAgfSkpKCk7CiAgICB9LAoKICAgIC8qKgogICAgICogQGNsYXNzIG9wZW5lZAogICAgICogQGRlc2NyaXB0aW9uIOWFs+mXreW9k+WJjeagh+etvuW3pui+ueeahOagh+etvgogICAgICogQHBhcmFtIHtPYmplY3R9IGNvbnRleHQKICAgICAqIEBwYXJhbSB7T2JqZWN0fSBwYXlsb2FkIHsgcGFnZVNlbGVjdDog5b2T5YmN6YCJ5Lit55qEdGFnTmFtZSB9CiAgICAgKi8KICAgIGNsb3NlTGVmdDogZnVuY3Rpb24gY2xvc2VMZWZ0KF9yZWYxNCkgewogICAgICB2YXIgX2FyZ3VtZW50cyA9IGFyZ3VtZW50czsKICAgICAgcmV0dXJuIF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTgoKSB7CiAgICAgICAgdmFyIHN0YXRlLCBjb21taXQsIGRpc3BhdGNoLCBfcmVmMTUsIHBhZ2VTZWxlY3QsIHBhZ2VBaW0sIGN1cnJlbnRJbmRleCwgaTsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWU4JChfY29udGV4dDgpIHsKICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQ4LnByZXYgPSBfY29udGV4dDgubmV4dCkgewogICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgIHN0YXRlID0gX3JlZjE0LnN0YXRlLCBjb21taXQgPSBfcmVmMTQuY29tbWl0LCBkaXNwYXRjaCA9IF9yZWYxNC5kaXNwYXRjaDsKICAgICAgICAgICAgICAgIF9yZWYxNSA9IF9hcmd1bWVudHMubGVuZ3RoID4gMSAmJiBfYXJndW1lbnRzWzFdICE9PSB1bmRlZmluZWQgPyBfYXJndW1lbnRzWzFdIDoge30sIHBhZ2VTZWxlY3QgPSBfcmVmMTUucGFnZVNlbGVjdDsKICAgICAgICAgICAgICAgIHBhZ2VBaW0gPSBwYWdlU2VsZWN0IHx8IHN0YXRlLmN1cnJlbnQ7CiAgICAgICAgICAgICAgICBjdXJyZW50SW5kZXggPSAwOwogICAgICAgICAgICAgICAgc3RhdGUub3BlbmVkLmZvckVhY2goZnVuY3Rpb24gKHBhZ2UsIGluZGV4KSB7CiAgICAgICAgICAgICAgICAgIGlmIChwYWdlLmZ1bGxQYXRoID09PSBwYWdlQWltKSBjdXJyZW50SW5kZXggPSBpbmRleDsKICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGlmICghKGN1cnJlbnRJbmRleCA+IDApKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gMTU7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGkgPSBzdGF0ZS5vcGVuZWQubGVuZ3RoIC0gMTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgaWYgKCEoaSA+PSAwKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDE1OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICBpZiAoIShzdGF0ZS5vcGVuZWRbaV0ubmFtZSA9PT0gJ2luZGV4JyB8fCBpID49IGN1cnJlbnRJbmRleCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSAxMDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OC5hYnJ1cHQoImNvbnRpbnVlIiwgMTIpOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgY29tbWl0KCdrZWVwQWxpdmVSZW1vdmUnLCBzdGF0ZS5vcGVuZWRbaV0ubmFtZSk7CiAgICAgICAgICAgICAgICBzdGF0ZS5vcGVuZWQuc3BsaWNlKGksIDEpOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgaS0tOwogICAgICAgICAgICAgICAgX2NvbnRleHQ4Lm5leHQgPSA3OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgICBfY29udGV4dDgubmV4dCA9IDE3OwogICAgICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoKCdvcGVuZWQyZGInKTsKCiAgICAgICAgICAgICAgY2FzZSAxNzoKICAgICAgICAgICAgICAgIC8vIOiuvue9ruW9k+WJjeeahOmhtemdogogICAgICAgICAgICAgICAgc3RhdGUuY3VycmVudCA9IHBhZ2VBaW07CgogICAgICAgICAgICAgICAgaWYgKCEocm91dGVyLmFwcC4kcm91dGUuZnVsbFBhdGggIT09IHBhZ2VBaW0pKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gMjE7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0OC5uZXh0ID0gMjE7CiAgICAgICAgICAgICAgICByZXR1cm4gcm91dGVyLnB1c2gocGFnZUFpbSk7CgogICAgICAgICAgICAgIGNhc2UgMjE6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDguc3RvcCgpOwogICAgICAgICAgICB9CiAgICAgICAgICB9CiAgICAgICAgfSwgX2NhbGxlZTgpOwogICAgICB9KSkoKTsKICAgIH0sCgogICAgLyoqCiAgICAgKiBAY2xhc3Mgb3BlbmVkCiAgICAgKiBAZGVzY3JpcHRpb24g5YWz6Zet5b2T5YmN5qCH562+5Y+z6L6555qE5qCH562+CiAgICAgKiBAcGFyYW0ge09iamVjdH0gY29udGV4dAogICAgICogQHBhcmFtIHtPYmplY3R9IHBheWxvYWQgeyBwYWdlU2VsZWN0OiDlvZPliY3pgInkuK3nmoR0YWdOYW1lIH0KICAgICAqLwogICAgY2xvc2VSaWdodDogZnVuY3Rpb24gY2xvc2VSaWdodChfcmVmMTYpIHsKICAgICAgdmFyIF9hcmd1bWVudHMyID0gYXJndW1lbnRzOwogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlOSgpIHsKICAgICAgICB2YXIgc3RhdGUsIGNvbW1pdCwgZGlzcGF0Y2gsIF9yZWYxNywgcGFnZVNlbGVjdCwgcGFnZUFpbSwgY3VycmVudEluZGV4LCBpOwoKICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZTkkKF9jb250ZXh0OSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDkucHJldiA9IF9jb250ZXh0OS5uZXh0KSB7CiAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgc3RhdGUgPSBfcmVmMTYuc3RhdGUsIGNvbW1pdCA9IF9yZWYxNi5jb21taXQsIGRpc3BhdGNoID0gX3JlZjE2LmRpc3BhdGNoOwogICAgICAgICAgICAgICAgX3JlZjE3ID0gX2FyZ3VtZW50czIubGVuZ3RoID4gMSAmJiBfYXJndW1lbnRzMlsxXSAhPT0gdW5kZWZpbmVkID8gX2FyZ3VtZW50czJbMV0gOiB7fSwgcGFnZVNlbGVjdCA9IF9yZWYxNy5wYWdlU2VsZWN0OwogICAgICAgICAgICAgICAgcGFnZUFpbSA9IHBhZ2VTZWxlY3QgfHwgc3RhdGUuY3VycmVudDsKICAgICAgICAgICAgICAgIGN1cnJlbnRJbmRleCA9IDA7CiAgICAgICAgICAgICAgICBzdGF0ZS5vcGVuZWQuZm9yRWFjaChmdW5jdGlvbiAocGFnZSwgaW5kZXgpIHsKICAgICAgICAgICAgICAgICAgaWYgKHBhZ2UuZnVsbFBhdGggPT09IHBhZ2VBaW0pIGN1cnJlbnRJbmRleCA9IGluZGV4OwogICAgICAgICAgICAgICAgfSk7IC8vIOWIoOmZpOaJk+W8gOeahOmhtemdoiDlubblnKjnvJPlrZjorr7nva7kuK3liKDpmaQKCiAgICAgICAgICAgICAgICBpID0gc3RhdGUub3BlbmVkLmxlbmd0aCAtIDE7CgogICAgICAgICAgICAgIGNhc2UgNjoKICAgICAgICAgICAgICAgIGlmICghKGkgPj0gMCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSAxNDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKCEoc3RhdGUub3BlbmVkW2ldLm5hbWUgPT09ICdpbmRleCcgfHwgY3VycmVudEluZGV4ID49IGkpKSB7CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gOTsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OS5hYnJ1cHQoImNvbnRpbnVlIiwgMTEpOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICBjb21taXQoJ2tlZXBBbGl2ZVJlbW92ZScsIHN0YXRlLm9wZW5lZFtpXS5uYW1lKTsKICAgICAgICAgICAgICAgIHN0YXRlLm9wZW5lZC5zcGxpY2UoaSwgMSk7CgogICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICBpLS07CiAgICAgICAgICAgICAgICBfY29udGV4dDkubmV4dCA9IDY7CiAgICAgICAgICAgICAgICBicmVhazsKCiAgICAgICAgICAgICAgY2FzZSAxNDoKICAgICAgICAgICAgICAgIF9jb250ZXh0OS5uZXh0ID0gMTY7CiAgICAgICAgICAgICAgICByZXR1cm4gZGlzcGF0Y2goJ29wZW5lZDJkYicpOwoKICAgICAgICAgICAgICBjYXNlIDE2OgogICAgICAgICAgICAgICAgLy8g6K6+572u5b2T5YmN55qE6aG16Z2iCiAgICAgICAgICAgICAgICBzdGF0ZS5jdXJyZW50ID0gcGFnZUFpbTsKCiAgICAgICAgICAgICAgICBpZiAoIShyb3V0ZXIuYXBwLiRyb3V0ZS5mdWxsUGF0aCAhPT0gcGFnZUFpbSkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSAyMDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQ5Lm5leHQgPSAyMDsKICAgICAgICAgICAgICAgIHJldHVybiByb3V0ZXIucHVzaChwYWdlQWltKTsKCiAgICAgICAgICAgICAgY2FzZSAyMDoKICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0OS5zdG9wKCk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LCBfY2FsbGVlOSk7CiAgICAgIH0pKSgpOwogICAgfSwKCiAgICAvKioKICAgICAqIEBjbGFzcyBvcGVuZWQKICAgICAqIEBkZXNjcmlwdGlvbiDlhbPpl63lvZPliY3mv4DmtLvkuYvlpJbnmoQgdGFnCiAgICAgKiBAcGFyYW0ge09iamVjdH0gY29udGV4dAogICAgICogQHBhcmFtIHtPYmplY3R9IHBheWxvYWQgeyBwYWdlU2VsZWN0OiDlvZPliY3pgInkuK3nmoR0YWdOYW1lIH0KICAgICAqLwogICAgY2xvc2VPdGhlcjogZnVuY3Rpb24gY2xvc2VPdGhlcihfcmVmMTgpIHsKICAgICAgdmFyIF9hcmd1bWVudHMzID0gYXJndW1lbnRzOwogICAgICByZXR1cm4gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlMTAoKSB7CiAgICAgICAgdmFyIHN0YXRlLCBjb21taXQsIGRpc3BhdGNoLCBfcmVmMTksIHBhZ2VTZWxlY3QsIHBhZ2VBaW0sIGN1cnJlbnRJbmRleCwgaTsKCiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMCQoX2NvbnRleHQxMCkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDEwLnByZXYgPSBfY29udGV4dDEwLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBzdGF0ZSA9IF9yZWYxOC5zdGF0ZSwgY29tbWl0ID0gX3JlZjE4LmNvbW1pdCwgZGlzcGF0Y2ggPSBfcmVmMTguZGlzcGF0Y2g7CiAgICAgICAgICAgICAgICBfcmVmMTkgPSBfYXJndW1lbnRzMy5sZW5ndGggPiAxICYmIF9hcmd1bWVudHMzWzFdICE9PSB1bmRlZmluZWQgPyBfYXJndW1lbnRzM1sxXSA6IHt9LCBwYWdlU2VsZWN0ID0gX3JlZjE5LnBhZ2VTZWxlY3Q7CiAgICAgICAgICAgICAgICBwYWdlQWltID0gcGFnZVNlbGVjdCB8fCBzdGF0ZS5jdXJyZW50OwogICAgICAgICAgICAgICAgY3VycmVudEluZGV4ID0gMDsKICAgICAgICAgICAgICAgIHN0YXRlLm9wZW5lZC5mb3JFYWNoKGZ1bmN0aW9uIChwYWdlLCBpbmRleCkgewogICAgICAgICAgICAgICAgICBpZiAocGFnZS5mdWxsUGF0aCA9PT0gcGFnZUFpbSkgY3VycmVudEluZGV4ID0gaW5kZXg7CiAgICAgICAgICAgICAgICB9KTsgLy8g5Yig6Zmk5omT5byA55qE6aG16Z2i5pWw5o2uIOW5tuabtOaWsOe8k+WtmOiuvue9rgoKICAgICAgICAgICAgICAgIGkgPSBzdGF0ZS5vcGVuZWQubGVuZ3RoIC0gMTsKCiAgICAgICAgICAgICAgY2FzZSA2OgogICAgICAgICAgICAgICAgaWYgKCEoaSA+PSAwKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSAxNDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgaWYgKCEoc3RhdGUub3BlbmVkW2ldLm5hbWUgPT09ICdpbmRleCcgfHwgY3VycmVudEluZGV4ID09PSBpKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSA5OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMC5hYnJ1cHQoImNvbnRpbnVlIiwgMTEpOwoKICAgICAgICAgICAgICBjYXNlIDk6CiAgICAgICAgICAgICAgICBjb21taXQoJ2tlZXBBbGl2ZVJlbW92ZScsIHN0YXRlLm9wZW5lZFtpXS5uYW1lKTsKICAgICAgICAgICAgICAgIHN0YXRlLm9wZW5lZC5zcGxpY2UoaSwgMSk7CgogICAgICAgICAgICAgIGNhc2UgMTE6CiAgICAgICAgICAgICAgICBpLS07CiAgICAgICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSA2OwogICAgICAgICAgICAgICAgYnJlYWs7CgogICAgICAgICAgICAgIGNhc2UgMTQ6CiAgICAgICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSAxNjsKICAgICAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaCgnb3BlbmVkMmRiJyk7CgogICAgICAgICAgICAgIGNhc2UgMTY6CiAgICAgICAgICAgICAgICAvLyDorr7nva7mlrDnmoTpobXpnaIKICAgICAgICAgICAgICAgIHN0YXRlLmN1cnJlbnQgPSBwYWdlQWltOwoKICAgICAgICAgICAgICAgIGlmICghKHJvdXRlci5hcHAuJHJvdXRlLmZ1bGxQYXRoICE9PSBwYWdlQWltKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDEwLm5leHQgPSAyMDsKICAgICAgICAgICAgICAgICAgYnJlYWs7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgX2NvbnRleHQxMC5uZXh0ID0gMjA7CiAgICAgICAgICAgICAgICByZXR1cm4gcm91dGVyLnB1c2gocGFnZUFpbSk7CgogICAgICAgICAgICAgIGNhc2UgMjA6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDEwLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxMCk7CiAgICAgIH0pKSgpOwogICAgfSwKCiAgICAvKioKICAgICAqIEBjbGFzcyBvcGVuZWQKICAgICAqIEBkZXNjcmlwdGlvbiDlhbPpl63miYDmnIkgdGFnCiAgICAgKiBAcGFyYW0ge09iamVjdH0gY29udGV4dAogICAgICovCiAgICBjbG9zZUFsbDogZnVuY3Rpb24gY2xvc2VBbGwoX3JlZjIwKSB7CiAgICAgIHJldHVybiBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUxMSgpIHsKICAgICAgICB2YXIgc3RhdGUsIGNvbW1pdCwgZGlzcGF0Y2gsIGk7CiAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUxMSQoX2NvbnRleHQxMSkgewogICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDExLnByZXYgPSBfY29udGV4dDExLm5leHQpIHsKICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICBzdGF0ZSA9IF9yZWYyMC5zdGF0ZSwgY29tbWl0ID0gX3JlZjIwLmNvbW1pdCwgZGlzcGF0Y2ggPSBfcmVmMjAuZGlzcGF0Y2g7CiAgICAgICAgICAgICAgICBpID0gc3RhdGUub3BlbmVkLmxlbmd0aCAtIDE7CgogICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgIGlmICghKGkgPj0gMCkpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMS5uZXh0ID0gMTA7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIGlmICghKHN0YXRlLm9wZW5lZFtpXS5uYW1lID09PSAnaW5kZXgnKSkgewogICAgICAgICAgICAgICAgICBfY29udGV4dDExLm5leHQgPSA1OwogICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQxMS5hYnJ1cHQoImNvbnRpbnVlIiwgNyk7CgogICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIGNvbW1pdCgna2VlcEFsaXZlUmVtb3ZlJywgc3RhdGUub3BlbmVkW2ldLm5hbWUpOwogICAgICAgICAgICAgICAgc3RhdGUub3BlbmVkLnNwbGljZShpLCAxKTsKCiAgICAgICAgICAgICAgY2FzZSA3OgogICAgICAgICAgICAgICAgaS0tOwogICAgICAgICAgICAgICAgX2NvbnRleHQxMS5uZXh0ID0gMjsKICAgICAgICAgICAgICAgIGJyZWFrOwoKICAgICAgICAgICAgICBjYXNlIDEwOgogICAgICAgICAgICAgICAgX2NvbnRleHQxMS5uZXh0ID0gMTI7CiAgICAgICAgICAgICAgICByZXR1cm4gZGlzcGF0Y2goJ29wZW5lZDJkYicpOwoKICAgICAgICAgICAgICBjYXNlIDEyOgogICAgICAgICAgICAgICAgaWYgKCEocm91dGVyLmFwcC4kcm91dGUubmFtZSAhPT0gJ2luZGV4JykpIHsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQxMS5uZXh0ID0gMTU7CiAgICAgICAgICAgICAgICAgIGJyZWFrOwogICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgIF9jb250ZXh0MTEubmV4dCA9IDE1OwogICAgICAgICAgICAgICAgcmV0dXJuIHJvdXRlci5wdXNoKHsKICAgICAgICAgICAgICAgICAgbmFtZTogJ2luZGV4JwogICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgIGNhc2UgMTU6CiAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDExLnN0b3AoKTsKICAgICAgICAgICAgfQogICAgICAgICAgfQogICAgICAgIH0sIF9jYWxsZWUxMSk7CiAgICAgIH0pKSgpOwogICAgfQogIH0sCiAgbXV0YXRpb25zOiB7CiAgICAvKioKICAgICAqIEBjbGFzcyBrZWVwQWxpdmUKICAgICAqIEBkZXNjcmlwdGlvbiDku47lt7Lnu4/miZPlvIDnmoTpobXpnaLorrDlvZXkuK3mm7TmlrDpnIDopoHnvJPlrZjnmoTpobXpnaLorrDlvZUKICAgICAqIEBwYXJhbSB7T2JqZWN0fSBzdGF0ZSBzdGF0ZQogICAgICovCiAgICBrZWVwQWxpdmVSZWZyZXNoOiBmdW5jdGlvbiBrZWVwQWxpdmVSZWZyZXNoKHN0YXRlKSB7CiAgICAgIHN0YXRlLmtlZXBBbGl2ZSA9IHN0YXRlLm9wZW5lZC5maWx0ZXIoZnVuY3Rpb24gKGl0ZW0pIHsKICAgICAgICByZXR1cm4gaXNLZWVwQWxpdmUoaXRlbSk7CiAgICAgIH0pLm1hcChmdW5jdGlvbiAoZSkgewogICAgICAgIHJldHVybiBlLm5hbWU7CiAgICAgIH0pOwogICAgfSwKCiAgICAvKioKICAgICAqIEBkZXNjcmlwdGlvbiDliKDpmaTkuIDkuKrpobXpnaLnmoTnvJPlrZjorr7nva4KICAgICAqIEBwYXJhbSB7T2JqZWN0fSBzdGF0ZSBzdGF0ZQogICAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgbmFtZQogICAgICovCiAgICBrZWVwQWxpdmVSZW1vdmU6IGZ1bmN0aW9uIGtlZXBBbGl2ZVJlbW92ZShzdGF0ZSwgbmFtZSkgewogICAgICB2YXIgbGlzdCA9IGNsb25lRGVlcChzdGF0ZS5rZWVwQWxpdmUpOwogICAgICB2YXIgaW5kZXggPSBsaXN0LmZpbmRJbmRleChmdW5jdGlvbiAoaXRlbSkgewogICAgICAgIHJldHVybiBpdGVtID09PSBuYW1lOwogICAgICB9KTsKCiAgICAgIGlmIChpbmRleCAhPT0gLTEpIHsKICAgICAgICBsaXN0LnNwbGljZShpbmRleCwgMSk7CiAgICAgICAgc3RhdGUua2VlcEFsaXZlID0gbGlzdDsKICAgICAgfQogICAgfSwKCiAgICAvKioKICAgICAqIEBkZXNjcmlwdGlvbiDlop7liqDkuIDkuKrpobXpnaLnmoTnvJPlrZjorr7nva4KICAgICAqIEBwYXJhbSB7T2JqZWN0fSBzdGF0ZSBzdGF0ZQogICAgICogQHBhcmFtIHtTdHJpbmd9IG5hbWUgbmFtZQogICAgICovCiAgICBrZWVwQWxpdmVQdXNoOiBmdW5jdGlvbiBrZWVwQWxpdmVQdXNoKHN0YXRlLCBuYW1lKSB7CiAgICAgIHZhciBrZWVwID0gY2xvbmVEZWVwKHN0YXRlLmtlZXBBbGl2ZSk7CiAgICAgIGtlZXAucHVzaChuYW1lKTsKICAgICAgc3RhdGUua2VlcEFsaXZlID0gdW5pcShrZWVwKTsKICAgIH0sCgogICAgLyoqCiAgICAgKiBAZGVzY3JpcHRpb24g5riF56m66aG16Z2i57yT5a2Y6K6+572uCiAgICAgKiBAcGFyYW0ge09iamVjdH0gc3RhdGUgc3RhdGUKICAgICAqLwogICAga2VlcEFsaXZlQ2xlYW46IGZ1bmN0aW9uIGtlZXBBbGl2ZUNsZWFuKHN0YXRlKSB7CiAgICAgIHN0YXRlLmtlZXBBbGl2ZSA9IFtdOwogICAgfSwKCiAgICAvKioKICAgICAqIEBjbGFzcyBjdXJyZW50CiAgICAgKiBAZGVzY3JpcHRpb24g6K6+572u5b2T5YmN5r+A5rS755qE6aG16Z2iIGZ1bGxQYXRoCiAgICAgKiBAcGFyYW0ge09iamVjdH0gc3RhdGUgc3RhdGUKICAgICAqIEBwYXJhbSB7U3RyaW5nfSBmdWxsUGF0aCBuZXcgZnVsbFBhdGgKICAgICAqLwogICAgY3VycmVudFNldDogZnVuY3Rpb24gY3VycmVudFNldChzdGF0ZSwgZnVsbFBhdGgpIHsKICAgICAgc3RhdGUuY3VycmVudCA9IGZ1bGxQYXRoOwogICAgfSwKCiAgICAvKioKICAgICAqIEBjbGFzcyBwb29sCiAgICAgKiBAZGVzY3JpcHRpb24g5L+d5a2YIHBvb2wgKOWAmemAieaxoCkKICAgICAqIEBwYXJhbSB7T2JqZWN0fSBzdGF0ZSBzdGF0ZQogICAgICogQHBhcmFtIHtBcnJheX0gcm91dGVzIHJvdXRlcwogICAgICovCiAgICBpbml0OiBmdW5jdGlvbiBpbml0KHN0YXRlLCByb3V0ZXMpIHsKICAgICAgdmFyIHBvb2wgPSBbXTsKCiAgICAgIHZhciBwdXNoID0gZnVuY3Rpb24gcHVzaChyb3V0ZXMpIHsKICAgICAgICByb3V0ZXMuZm9yRWFjaChmdW5jdGlvbiAocm91dGUpIHsKICAgICAgICAgIGlmIChyb3V0ZS5jaGlsZHJlbiAmJiByb3V0ZS5jaGlsZHJlbi5sZW5ndGggPiAwKSB7CiAgICAgICAgICAgIHB1c2gocm91dGUuY2hpbGRyZW4pOwogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgaWYgKCFyb3V0ZS5oaWRkZW4pIHsKICAgICAgICAgICAgICB2YXIgbWV0YSA9IHJvdXRlLm1ldGEsCiAgICAgICAgICAgICAgICAgIG5hbWUgPSByb3V0ZS5uYW1lLAogICAgICAgICAgICAgICAgICBwYXRoID0gcm91dGUucGF0aDsKICAgICAgICAgICAgICBwb29sLnB1c2goewogICAgICAgICAgICAgICAgbWV0YTogbWV0YSwKICAgICAgICAgICAgICAgIG5hbWU6IG5hbWUsCiAgICAgICAgICAgICAgICBwYXRoOiBwYXRoCiAgICAgICAgICAgICAgfSk7CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9KTsKICAgICAgfTsKCiAgICAgIHB1c2gocm91dGVzKTsKICAgICAgc3RhdGUucG9vbCA9IHBvb2w7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["C:/Users/58215/Desktop/SchoolMustardSpace/Html (front for user)/src/store/modules/d2admin/modules/page.js"],"names":["cloneDeep","uniq","get","router","setting","isKeepAlive","data","namespaced","state","pool","opened","openedLoaded","current","keepAlive","actions","isLoaded","Promise","resolve","timer","setInterval","clearInterval","openedLoad","commit","dispatch","dbName","path","defaultValue","page","user","root","value","valid","map","fullPath","push","find","item","name","Object","assign","filter","index","opened2db","openedUpdate","params","query","splice","openedSort","oldIndex","newIndex","add","tag","newTag","open","meta","pageOpendIndex","pageOpend","same","t","close","tagName","newPage","isCurrent","len","length","i","findIndex","routerObj","closeLeft","pageSelect","pageAim","currentIndex","forEach","app","$route","closeRight","closeOther","closeAll","mutations","keepAliveRefresh","e","keepAliveRemove","list","keepAlivePush","keep","keepAliveClean","currentSet","init","routes","route","children","hidden"],"mappings":"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","sourcesContent":["import { cloneDeep, uniq, get } from 'lodash'\nimport router from '@/router'\nimport setting from '@/setting.js'\n\n// \nconst isKeepAlive = data => get(data, 'meta.cache', false)\n\nexport default {\n  namespaced: true,\n  state: {\n    //  tab \n    pool: [],\n    // \n    opened: get(setting, 'page.opened', []),\n    //  https://github.com/d2-projects/d2-admin/issues/201\n    openedLoaded: false,\n    // \n    current: '',\n    //  name\n    keepAlive: []\n  },\n  actions: {\n    /**\n     * @description  https://github.com/d2-projects/d2-admin/issues/201\n     * @param {Object} context\n     */\n    isLoaded ({ state }) {\n      if (state.openedLoaded) return Promise.resolve()\n      return new Promise(resolve => {\n        const timer = setInterval(() => {\n          if (state.openedLoaded) resolve(clearInterval(timer))\n        }, 10)\n      })\n    },\n    /**\n     * @class opened\n     * @description \n     * @param {Object} context\n     */\n    async openedLoad ({ state, commit, dispatch }) {\n      // store \n      const value = await dispatch('d2admin/db/get', {\n        dbName: 'sys',\n        path: 'page.opened',\n        defaultValue: setting.page.opened,\n        user: true\n      }, { root: true })\n      //  \n      //  fullPath \n      // \n      // valid  1, 1, 0, 1 => , , , \n      const valid = []\n      // \n      state.opened = value\n        .map(opened => {\n          // \n          if (opened.fullPath === '/index') {\n            valid.push(1)\n            return opened\n          }\n          //  name \n          const find = state.pool.find(item => item.name === opened.name)\n          // \n          valid.push(find ? 1 : 0)\n          //  \n          //  params  query, \n          return Object.assign({}, opened, find)\n        })\n        .filter((opened, index) => valid[index] === 1)\n      //  https://github.com/d2-projects/d2-admin/issues/201\n      state.openedLoaded = true\n      //  opened \n      commit('keepAliveRefresh')\n    },\n    /**\n     *  opened   state.opened\n     * @param {Object} context\n     */\n    async opened2db ({ state, dispatch }) {\n      // \n      dispatch('d2admin/db/set', {\n        dbName: 'sys',\n        path: 'page.opened',\n        value: state.opened,\n        user: true\n      }, { root: true })\n    },\n    /**\n     * @class opened\n     * @description \n     * @param {Object} context\n     * @param {Object} payload { index, params, query, fullPath } \n     */\n    async openedUpdate ({ state, commit, dispatch }, { index, params, query, fullPath }) {\n      // \n      let page = state.opened[index]\n      page.params = params || page.params\n      page.query = query || page.query\n      page.fullPath = fullPath || page.fullPath\n      state.opened.splice(index, 1, page)\n      // \n      await dispatch('opened2db')\n    },\n    /**\n     * @class opened\n     * @description \n     * @param {Object} context\n     * @param {Object} payload { oldIndex, newIndex } \n     */\n    async openedSort ({ state, commit, dispatch }, { oldIndex, newIndex }) {\n      // \n      let page = state.opened[oldIndex]\n      state.opened.splice(oldIndex, 1)\n      state.opened.splice(newIndex, 0, page)\n      // \n      await dispatch('opened2db')\n    },\n    /**\n     * @class opened\n     * @description  tag ()\n     * @param {Object} context\n     * @param {Object} payload new tag info\n     */\n    async add ({ state, commit, dispatch }, { tag, params, query, fullPath }) {\n      //  tag \n      let newTag = tag\n      newTag.params = params || newTag.params\n      newTag.query = query || newTag.query\n      newTag.fullPath = fullPath || newTag.fullPath\n      // \n      state.opened.push(newTag)\n      //  \n      if (isKeepAlive(newTag)) commit('keepAlivePush', tag.name)\n      // \n      await dispatch('opened2db')\n    },\n    /**\n     * @class current\n     * @description \n     * @param {Object} context\n     * @param {Object} payload  to  { name, params, query, fullPath, meta } \n     */\n    async open ({ state, commit, dispatch }, { name, params, query, fullPath, meta }) {\n      // \n      let opened = state.opened\n      //  \n      let pageOpendIndex = 0\n      const pageOpend = opened.find((page, index) => {\n        const same = page.fullPath === fullPath\n        pageOpendIndex = same ? index : pageOpendIndex\n        return same\n      })\n      if (pageOpend) {\n        // \n        await dispatch('openedUpdate', {\n          index: pageOpendIndex,\n          params,\n          query,\n          fullPath\n        })\n      } else {\n        // \n        let page = state.pool.find(t => t.name === name)\n        //  page  \n        if (page) {\n          await dispatch('add', {\n            tag: Object.assign({}, page),\n            params,\n            query,\n            fullPath\n          })\n        }\n      }\n      //  \n      if (isKeepAlive({ meta })) commit('keepAlivePush', name)\n      // \n      commit('currentSet', fullPath)\n    },\n    /**\n     * @class opened\n     * @description  tag ()\n     * @param {Object} context\n     * @param {Object} payload { tagName:  }\n     */\n    async close ({ state, commit, dispatch }, { tagName }) {\n      // \n      let newPage = {}\n      const isCurrent = state.current === tagName\n      // \n      if (isCurrent) {\n        // \n        let len = state.opened.length\n        for (let i = 0; i < len; i++) {\n          if (state.opened[i].fullPath === tagName) {\n            newPage = i < len - 1 ? state.opened[i + 1] : state.opened[i - 1]\n            break\n          }\n        }\n      }\n      // \n      const index = state.opened.findIndex(page => page.fullPath === tagName)\n      if (index >= 0) {\n        //  \n        commit('keepAliveRemove', state.opened[index].name)\n        //  \n        state.opened.splice(index, 1)\n      }\n      // \n      await dispatch('opened2db')\n      // \n      if (isCurrent) {\n        const { name = 'index', params = {}, query = {} } = newPage\n        let routerObj = { name, params, query }\n        await router.push(routerObj)\n      }\n    },\n    /**\n     * @class opened\n     * @description \n     * @param {Object} context\n     * @param {Object} payload { pageSelect: tagName }\n     */\n    async closeLeft ({ state, commit, dispatch }, { pageSelect } = {}) {\n      const pageAim = pageSelect || state.current\n      let currentIndex = 0\n      state.opened.forEach((page, index) => {\n        if (page.fullPath === pageAim) currentIndex = index\n      })\n      if (currentIndex > 0) {\n        //  \n        for (let i = state.opened.length - 1; i >= 0; i--) {\n          if (state.opened[i].name === 'index' || i >= currentIndex) {\n            continue\n          }\n\n          commit('keepAliveRemove', state.opened[i].name)\n          state.opened.splice(i, 1)\n        }\n      }\n      // \n      await dispatch('opened2db')\n      // \n      state.current = pageAim\n      if (router.app.$route.fullPath !== pageAim) await router.push(pageAim)\n    },\n    /**\n     * @class opened\n     * @description \n     * @param {Object} context\n     * @param {Object} payload { pageSelect: tagName }\n     */\n    async closeRight ({ state, commit, dispatch }, { pageSelect } = {}) {\n      const pageAim = pageSelect || state.current\n      let currentIndex = 0\n      state.opened.forEach((page, index) => {\n        if (page.fullPath === pageAim) currentIndex = index\n      })\n      //  \n      for (let i = state.opened.length - 1; i >= 0; i--) {\n        if (state.opened[i].name === 'index' || currentIndex >= i) {\n          continue\n        }\n\n        commit('keepAliveRemove', state.opened[i].name)\n        state.opened.splice(i, 1)\n      }\n      // \n      await dispatch('opened2db')\n      // \n      state.current = pageAim\n      if (router.app.$route.fullPath !== pageAim) await router.push(pageAim)\n    },\n    /**\n     * @class opened\n     * @description  tag\n     * @param {Object} context\n     * @param {Object} payload { pageSelect: tagName }\n     */\n    async closeOther ({ state, commit, dispatch }, { pageSelect } = {}) {\n      const pageAim = pageSelect || state.current\n      let currentIndex = 0\n      state.opened.forEach((page, index) => {\n        if (page.fullPath === pageAim) currentIndex = index\n      })\n      //  \n      for (let i = state.opened.length - 1; i >= 0; i--) {\n        if (state.opened[i].name === 'index' || currentIndex === i) {\n          continue\n        }\n\n        commit('keepAliveRemove', state.opened[i].name)\n        state.opened.splice(i, 1)\n      }\n      // \n      await dispatch('opened2db')\n      // \n      state.current = pageAim\n      if (router.app.$route.fullPath !== pageAim) await router.push(pageAim)\n    },\n    /**\n     * @class opened\n     * @description  tag\n     * @param {Object} context\n     */\n    async closeAll ({ state, commit, dispatch }) {\n      //  \n      for (let i = state.opened.length - 1; i >= 0; i--) {\n        if (state.opened[i].name === 'index') {\n          continue\n        }\n\n        commit('keepAliveRemove', state.opened[i].name)\n        state.opened.splice(i, 1)\n      }\n      // \n      await dispatch('opened2db')\n      // \n      if (router.app.$route.name !== 'index') {\n        await router.push({ name: 'index' })\n      }\n    }\n  },\n  mutations: {\n    /**\n     * @class keepAlive\n     * @description \n     * @param {Object} state state\n     */\n    keepAliveRefresh (state) {\n      state.keepAlive = state.opened.filter(item => isKeepAlive(item)).map(e => e.name)\n    },\n    /**\n     * @description \n     * @param {Object} state state\n     * @param {String} name name\n     */\n    keepAliveRemove (state, name) {\n      const list = cloneDeep(state.keepAlive)\n      const index = list.findIndex(item => item === name)\n      if (index !== -1) {\n        list.splice(index, 1)\n        state.keepAlive = list\n      }\n    },\n    /**\n     * @description \n     * @param {Object} state state\n     * @param {String} name name\n     */\n    keepAlivePush (state, name) {\n      const keep = cloneDeep(state.keepAlive)\n      keep.push(name)\n      state.keepAlive = uniq(keep)\n    },\n    /**\n     * @description \n     * @param {Object} state state\n     */\n    keepAliveClean (state) {\n      state.keepAlive = []\n    },\n    /**\n     * @class current\n     * @description  fullPath\n     * @param {Object} state state\n     * @param {String} fullPath new fullPath\n     */\n    currentSet (state, fullPath) {\n      state.current = fullPath\n    },\n    /**\n     * @class pool\n     * @description  pool ()\n     * @param {Object} state state\n     * @param {Array} routes routes\n     */\n    init (state, routes) {\n      const pool = []\n      const push = function (routes) {\n        routes.forEach(route => {\n          if (route.children && route.children.length > 0) {\n            push(route.children)\n          } else {\n            if (!route.hidden) {\n              const { meta, name, path } = route\n              pool.push({ meta, name, path })\n            }\n          }\n        })\n      }\n      push(routes)\n      state.pool = pool\n    }\n  }\n}\n"]}]}