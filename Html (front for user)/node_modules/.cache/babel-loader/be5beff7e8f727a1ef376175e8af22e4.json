{"remainingRequest":"D:\\实践\\d2-admin-start-kit-master\\node_modules\\babel-loader\\lib\\index.js!D:\\实践\\d2-admin-start-kit-master\\node_modules\\eslint-loader\\index.js??ref--13-0!D:\\实践\\d2-admin-start-kit-master\\src\\store\\modules\\d2admin\\modules\\log.js","dependencies":[{"path":"D:\\实践\\d2-admin-start-kit-master\\src\\store\\modules\\d2admin\\modules\\log.js","mtime":1587908413000},{"path":"D:\\实践\\d2-admin-start-kit-master\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"D:\\实践\\d2-admin-start-kit-master\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"D:\\实践\\d2-admin-start-kit-master\\node_modules\\eslint-loader\\index.js","mtime":1588755592739}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuZmlsdGVyIjsKaW1wb3J0IF9vYmplY3RTcHJlYWQgZnJvbSAiRDovXHU1QjlFXHU4REY1L2QyLWFkbWluLXN0YXJ0LWtpdC1tYXN0ZXIvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL29iamVjdFNwcmVhZDIiOwppbXBvcnQgZGF5anMgZnJvbSAnZGF5anMnOwppbXBvcnQgeyBnZXQgfSBmcm9tICdsb2Rhc2gnOwppbXBvcnQgdXRpbCBmcm9tICdAL2xpYnMvdXRpbC5qcyc7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiB7CiAgICAvLyDplJnor6/ml6Xlv5cKICAgIC8vICsg5pel5b+X5p2h55uu55qE5bGe5oCnCiAgICAvLyAgIC0gbWVzc2FnZSDlv4Xpobsg5pel5b+X5L+h5oGvCiAgICAvLyAgIC0gdHlwZSDpnZ7lv4Xpobsg57G75Z6LIHN1Y2Nlc3MgfCB3YXJuaW5nIHwgaW5mbyjpu5jorqQpIHwgZGFuZ2VyCiAgICAvLyAgIC0gdGltZSDlv4Xpobsg5pel5b+X6K6w5b2V5pe26Ze0CiAgICAvLyAgIC0gbWV0YSDpnZ7lv4Xpobsg5YW25a6D5pC65bim5L+h5oGvCiAgICBsb2c6IFtdCiAgfSwKICBnZXR0ZXJzOiB7CiAgICAvKioKICAgICAqIEBkZXNjcmlwdGlvbiDov5Tlm57njrDlrZggbG9nIChhbGwpIOeahOadoeaVsAogICAgICogQHBhcmFtIHsqfSBzdGF0ZSB2dWV4IHN0YXRlCiAgICAgKi8KICAgIGxlbmd0aDogZnVuY3Rpb24gbGVuZ3RoKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5sb2cubGVuZ3RoOwogICAgfSwKCiAgICAvKioKICAgICAqIEBkZXNjcmlwdGlvbiDov5Tlm57njrDlrZggbG9nIChlcnJvcikg55qE5p2h5pWwCiAgICAgKiBAcGFyYW0geyp9IHN0YXRlIHZ1ZXggc3RhdGUKICAgICAqLwogICAgbGVuZ3RoRXJyb3I6IGZ1bmN0aW9uIGxlbmd0aEVycm9yKHN0YXRlKSB7CiAgICAgIHJldHVybiBzdGF0ZS5sb2cuZmlsdGVyKGZ1bmN0aW9uIChsb2cpIHsKICAgICAgICByZXR1cm4gbG9nLnR5cGUgPT09ICdkYW5nZXInOwogICAgICB9KS5sZW5ndGg7CiAgICB9CiAgfSwKICBhY3Rpb25zOiB7CiAgICAvKioKICAgICAqIEBkZXNjcmlwdGlvbiDmt7vliqDkuIDkuKrml6Xlv5cKICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjb250ZXh0CiAgICAgKiBAcGFyYW0ge1N0cmluZ30gcGFyYW0gbWVzc2FnZSB7U3RyaW5nfSDkv6Hmga8KICAgICAqIEBwYXJhbSB7U3RyaW5nfSBwYXJhbSB0eXBlIHtTdHJpbmd9IOexu+WeiwogICAgICogQHBhcmFtIHtPYmplY3R9IHBheWxvYWQgbWV0YSB7T2JqZWN0fSDpmYTluKbnmoTkv6Hmga8KICAgICAqLwogICAgcHVzaDogZnVuY3Rpb24gcHVzaChfcmVmLCBfcmVmMikgewogICAgICB2YXIgcm9vdFN0YXRlID0gX3JlZi5yb290U3RhdGUsCiAgICAgICAgICBjb21taXQgPSBfcmVmLmNvbW1pdDsKICAgICAgdmFyIG1lc3NhZ2UgPSBfcmVmMi5tZXNzYWdlLAogICAgICAgICAgX3JlZjIkdHlwZSA9IF9yZWYyLnR5cGUsCiAgICAgICAgICB0eXBlID0gX3JlZjIkdHlwZSA9PT0gdm9pZCAwID8gJ2luZm8nIDogX3JlZjIkdHlwZSwKICAgICAgICAgIG1ldGEgPSBfcmVmMi5tZXRhOwogICAgICBjb21taXQoJ3B1c2gnLCB7CiAgICAgICAgbWVzc2FnZTogbWVzc2FnZSwKICAgICAgICB0eXBlOiB0eXBlLAogICAgICAgIHRpbWU6IGRheWpzKCkuZm9ybWF0KCdZWVlZLU1NLUREIEhIOm1tOnNzJyksCiAgICAgICAgbWV0YTogX29iamVjdFNwcmVhZCh7CiAgICAgICAgICAvLyDlvZPliY3nlKjmiLfkv6Hmga8KICAgICAgICAgIHVzZXI6IHJvb3RTdGF0ZS5kMmFkbWluLnVzZXIuaW5mbywKICAgICAgICAgIC8vIOW9k+WJjeeUqOaIt+eahCB1dWlkCiAgICAgICAgICB1dWlkOiB1dGlsLmNvb2tpZXMuZ2V0KCd1dWlkJyksCiAgICAgICAgICAvLyDlvZPliY3nmoQgdG9rZW4KICAgICAgICAgIHRva2VuOiB1dGlsLmNvb2tpZXMuZ2V0KCd0b2tlbicpLAogICAgICAgICAgLy8g5b2T5YmN5Zyw5Z2ACiAgICAgICAgICB1cmw6IGdldCh3aW5kb3csICdsb2NhdGlvbi5ocmVmJywgJycpCiAgICAgICAgfSwgbWV0YSkKICAgICAgfSk7CiAgICB9CiAgfSwKICBtdXRhdGlvbnM6IHsKICAgIC8qKgogICAgICogQGRlc2NyaXB0aW9uIOa3u+WKoOaXpeW/lwogICAgICogQHBhcmFtIHtPYmplY3R9IHN0YXRlIHN0YXRlCiAgICAgKiBAcGFyYW0ge09iamVjdH0gbG9nIGRhdGEKICAgICAqLwogICAgcHVzaDogZnVuY3Rpb24gcHVzaChzdGF0ZSwgbG9nKSB7CiAgICAgIHN0YXRlLmxvZy5wdXNoKGxvZyk7CiAgICB9LAoKICAgIC8qKgogICAgICogQGRlc2NyaXB0aW9uIOa4heepuuaXpeW/lwogICAgICogQHBhcmFtIHtPYmplY3R9IHN0YXRlIHN0YXRlCiAgICAgKi8KICAgIGNsZWFuOiBmdW5jdGlvbiBjbGVhbihzdGF0ZSkgewogICAgICAvLyBzdG9yZSDotYvlgLwKICAgICAgc3RhdGUubG9nID0gW107CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["D:/实践/d2-admin-start-kit-master/src/store/modules/d2admin/modules/log.js"],"names":["dayjs","get","util","namespaced","state","log","getters","length","lengthError","filter","type","actions","push","rootState","commit","message","meta","time","format","user","d2admin","info","uuid","cookies","token","url","window","mutations","clean"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,SAASC,GAAT,QAAoB,QAApB;AACA,OAAOC,IAAP,MAAiB,gBAAjB;AAEA,eAAe;AACbC,EAAAA,UAAU,EAAE,IADC;AAEbC,EAAAA,KAAK,EAAE;AACL;AACA;AACA;AACA;AACA;AACA;AACAC,IAAAA,GAAG,EAAE;AAPA,GAFM;AAWbC,EAAAA,OAAO,EAAE;AACP;;;;AAIAC,IAAAA,MALO,kBAKCH,KALD,EAKQ;AACb,aAAOA,KAAK,CAACC,GAAN,CAAUE,MAAjB;AACD,KAPM;;AAQP;;;;AAIAC,IAAAA,WAZO,uBAYMJ,KAZN,EAYa;AAClB,aAAOA,KAAK,CAACC,GAAN,CAAUI,MAAV,CAAiB,UAAAJ,GAAG;AAAA,eAAIA,GAAG,CAACK,IAAJ,KAAa,QAAjB;AAAA,OAApB,EAA+CH,MAAtD;AACD;AAdM,GAXI;AA2BbI,EAAAA,OAAO,EAAE;AACP;;;;;;;AAOAC,IAAAA,IARO,6BAQwD;AAAA,UAAvDC,SAAuD,QAAvDA,SAAuD;AAAA,UAA5CC,MAA4C,QAA5CA,MAA4C;AAAA,UAAhCC,OAAgC,SAAhCA,OAAgC;AAAA,6BAAvBL,IAAuB;AAAA,UAAvBA,IAAuB,2BAAhB,MAAgB;AAAA,UAARM,IAAQ,SAARA,IAAQ;AAC7DF,MAAAA,MAAM,CAAC,MAAD,EAAS;AACbC,QAAAA,OAAO,EAAPA,OADa;AAEbL,QAAAA,IAAI,EAAJA,IAFa;AAGbO,QAAAA,IAAI,EAAEjB,KAAK,GAAGkB,MAAR,CAAe,qBAAf,CAHO;AAIbF,QAAAA,IAAI;AACF;AACAG,UAAAA,IAAI,EAAEN,SAAS,CAACO,OAAV,CAAkBD,IAAlB,CAAuBE,IAF3B;AAGF;AACAC,UAAAA,IAAI,EAAEpB,IAAI,CAACqB,OAAL,CAAatB,GAAb,CAAiB,MAAjB,CAJJ;AAKF;AACAuB,UAAAA,KAAK,EAAEtB,IAAI,CAACqB,OAAL,CAAatB,GAAb,CAAiB,OAAjB,CANL;AAOF;AACAwB,UAAAA,GAAG,EAAExB,GAAG,CAACyB,MAAD,EAAS,eAAT,EAA0B,EAA1B;AARN,WAUCV,IAVD;AAJS,OAAT,CAAN;AAiBD;AA1BM,GA3BI;AAuDbW,EAAAA,SAAS,EAAE;AACT;;;;;AAKAf,IAAAA,IANS,gBAMHR,KANG,EAMIC,GANJ,EAMS;AAChBD,MAAAA,KAAK,CAACC,GAAN,CAAUO,IAAV,CAAeP,GAAf;AACD,KARQ;;AAST;;;;AAIAuB,IAAAA,KAbS,iBAaFxB,KAbE,EAaK;AACZ;AACAA,MAAAA,KAAK,CAACC,GAAN,GAAY,EAAZ;AACD;AAhBQ;AAvDE,CAAf","sourcesContent":["import dayjs from 'dayjs'\nimport { get } from 'lodash'\nimport util from '@/libs/util.js'\n\nexport default {\n  namespaced: true,\n  state: {\n    // 错误日志\n    // + 日志条目的属性\n    //   - message 必须 日志信息\n    //   - type 非必须 类型 success | warning | info(默认) | danger\n    //   - time 必须 日志记录时间\n    //   - meta 非必须 其它携带信息\n    log: []\n  },\n  getters: {\n    /**\n     * @description 返回现存 log (all) 的条数\n     * @param {*} state vuex state\n     */\n    length (state) {\n      return state.log.length\n    },\n    /**\n     * @description 返回现存 log (error) 的条数\n     * @param {*} state vuex state\n     */\n    lengthError (state) {\n      return state.log.filter(log => log.type === 'danger').length\n    }\n  },\n  actions: {\n    /**\n     * @description 添加一个日志\n     * @param {Object} context\n     * @param {String} param message {String} 信息\n     * @param {String} param type {String} 类型\n     * @param {Object} payload meta {Object} 附带的信息\n     */\n    push ({ rootState, commit }, { message, type = 'info', meta }) {\n      commit('push', {\n        message,\n        type,\n        time: dayjs().format('YYYY-MM-DD HH:mm:ss'),\n        meta: {\n          // 当前用户信息\n          user: rootState.d2admin.user.info,\n          // 当前用户的 uuid\n          uuid: util.cookies.get('uuid'),\n          // 当前的 token\n          token: util.cookies.get('token'),\n          // 当前地址\n          url: get(window, 'location.href', ''),\n          // 用户设置\n          ...meta\n        }\n      })\n    }\n  },\n  mutations: {\n    /**\n     * @description 添加日志\n     * @param {Object} state state\n     * @param {Object} log data\n     */\n    push (state, log) {\n      state.log.push(log)\n    },\n    /**\n     * @description 清空日志\n     * @param {Object} state state\n     */\n    clean (state) {\n      // store 赋值\n      state.log = []\n    }\n  }\n}\n"]}]}