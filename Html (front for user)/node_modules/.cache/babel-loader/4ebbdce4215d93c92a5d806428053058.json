{"remainingRequest":"C:\\Code\\软工时间寒假作业\\schoolSpace\\node_modules\\babel-loader\\lib\\index.js!C:\\Code\\软工时间寒假作业\\schoolSpace\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Code\\软工时间寒假作业\\schoolSpace\\src\\store\\modules\\d2admin\\modules\\size.js","dependencies":[{"path":"C:\\Code\\软工时间寒假作业\\schoolSpace\\src\\store\\modules\\d2admin\\modules\\size.js","mtime":1590487885000},{"path":"C:\\Code\\软工时间寒假作业\\schoolSpace\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Code\\软工时间寒假作业\\schoolSpace\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Code\\软工时间寒假作业\\schoolSpace\\node_modules\\eslint-loader\\index.js","mtime":1588755592739}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJDOi9Db2RlL1x1OEY2Rlx1NURFNVx1NjVGNlx1OTVGNFx1NUJEMlx1NTA0N1x1NEY1Q1x1NEUxQS9zY2hvb2xTcGFjZS9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCBWdWUgZnJvbSAndnVlJzsKaW1wb3J0IHJvdXRlciBmcm9tICdAL3JvdXRlcic7CmV4cG9ydCBkZWZhdWx0IHsKICBuYW1lc3BhY2VkOiB0cnVlLAogIHN0YXRlOiB7CiAgICAvLyDlsLrlr7gKICAgIHZhbHVlOiAnJyAvLyBtZWRpdW0gc21hbGwgbWluaQoKICB9LAogIGFjdGlvbnM6IHsKICAgIC8qKgogICAgICogQGRlc2NyaXB0aW9uIOWwhuW9k+WJjeeahOiuvue9ruW6lOeUqOWIsCBlbGVtZW50CiAgICAgKiBAcGFyYW0ge09iamVjdH0gY29udGV4dAogICAgICogQHBhcmFtIHtCb29sZWFufSByZWZyZXNoIOaYr+WQpuWcqOiuvue9ruS5i+WQjuWIt+aWsOmhtemdogogICAgICovCiAgICBhcHBseTogZnVuY3Rpb24gYXBwbHkoX3JlZiwgcmVmcmVzaCkgewogICAgICB2YXIgc3RhdGUgPSBfcmVmLnN0YXRlLAogICAgICAgICAgY29tbWl0ID0gX3JlZi5jb21taXQ7CiAgICAgIFZ1ZS5wcm90b3R5cGUuJEVMRU1FTlQuc2l6ZSA9IHN0YXRlLnZhbHVlOwoKICAgICAgaWYgKHJlZnJlc2gpIHsKICAgICAgICBjb21taXQoJ2QyYWRtaW4vcGFnZS9rZWVwQWxpdmVDbGVhbicsIG51bGwsIHsKICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICB9KTsKICAgICAgICByb3V0ZXIucmVwbGFjZSgnL3JlZnJlc2gnKTsKICAgICAgfQogICAgfSwKCiAgICAvKioKICAgICAqIEBkZXNjcmlwdGlvbiDnoa7orqTlt7Lnu4/liqDovb3nu4Tku7blsLrlr7jorr7nva4gaHR0cHM6Ly9naXRodWIuY29tL2QyLXByb2plY3RzL2QyLWFkbWluL2lzc3Vlcy8xOTgKICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjb250ZXh0CiAgICAgKi8KICAgIGlzTG9hZGVkOiBmdW5jdGlvbiBpc0xvYWRlZChfcmVmMikgewogICAgICB2YXIgc3RhdGUgPSBfcmVmMi5zdGF0ZTsKICAgICAgaWYgKHN0YXRlLnZhbHVlKSByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgICAgIHZhciB0aW1lciA9IHNldEludGVydmFsKGZ1bmN0aW9uICgpIHsKICAgICAgICAgIGlmIChzdGF0ZS52YWx1ZSkgewogICAgICAgICAgICByZXNvbHZlKGNsZWFySW50ZXJ2YWwodGltZXIpKTsKICAgICAgICAgIH0KICAgICAgICB9LCAxMCk7CiAgICAgIH0pOwogICAgfSwKCiAgICAvKioKICAgICAqIEBkZXNjcmlwdGlvbiDorr7nva7lsLrlr7gKICAgICAqIEBwYXJhbSB7T2JqZWN0fSBjb250ZXh0CiAgICAgKiBAcGFyYW0ge1N0cmluZ30gc2l6ZSDlsLrlr7gKICAgICAqLwogICAgc2V0OiBmdW5jdGlvbiBzZXQoX3JlZjMsIHNpemUpIHsKICAgICAgdmFyIHN0YXRlID0gX3JlZjMuc3RhdGUsCiAgICAgICAgICBkaXNwYXRjaCA9IF9yZWYzLmRpc3BhdGNoOwogICAgICByZXR1cm4gbmV3IFByb21pc2UoIC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIF9yZWY0ID0gX2FzeW5jVG9HZW5lcmF0b3IoIC8qI19fUFVSRV9fKi9yZWdlbmVyYXRvclJ1bnRpbWUubWFyayhmdW5jdGlvbiBfY2FsbGVlKHJlc29sdmUpIHsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgLy8gc3RvcmUg6LWL5YC8CiAgICAgICAgICAgICAgICAgIHN0YXRlLnZhbHVlID0gc2l6ZTsgLy8g5bqU55SoCgogICAgICAgICAgICAgICAgICBkaXNwYXRjaCgnYXBwbHknLCB0cnVlKTsgLy8g5oyB5LmF5YyWCgogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNDsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoKCdkMmFkbWluL2RiL3NldCcsIHsKICAgICAgICAgICAgICAgICAgICBkYk5hbWU6ICdzeXMnLAogICAgICAgICAgICAgICAgICAgIHBhdGg6ICdzaXplLnZhbHVlJywKICAgICAgICAgICAgICAgICAgICB2YWx1ZTogc3RhdGUudmFsdWUsCiAgICAgICAgICAgICAgICAgICAgdXNlcjogdHJ1ZQogICAgICAgICAgICAgICAgICB9LCB7CiAgICAgICAgICAgICAgICAgICAgcm9vdDogdHJ1ZQogICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBjYXNlIDQ6CiAgICAgICAgICAgICAgICAgIC8vIGVuZAogICAgICAgICAgICAgICAgICByZXNvbHZlKCk7CgogICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgY2FzZSAiZW5kIjoKICAgICAgICAgICAgICAgICAgcmV0dXJuIF9jb250ZXh0LnN0b3AoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIF9jYWxsZWUpOwogICAgICAgIH0pKTsKCiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeCkgewogICAgICAgICAgcmV0dXJuIF9yZWY0LmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgfTsKICAgICAgfSgpKTsKICAgIH0sCgogICAgLyoqCiAgICAgKiBAZGVzY3JpcHRpb24g5LuO5oyB5LmF5YyW5pWw5o2u6K+75Y+W5bC65a+46K6+572uCiAgICAgKiBAcGFyYW0ge09iamVjdH0gY29udGV4dAogICAgICovCiAgICBsb2FkOiBmdW5jdGlvbiBsb2FkKF9yZWY1KSB7CiAgICAgIHZhciBzdGF0ZSA9IF9yZWY1LnN0YXRlLAogICAgICAgICAgZGlzcGF0Y2ggPSBfcmVmNS5kaXNwYXRjaDsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBfcmVmNiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZTIocmVzb2x2ZSkgewogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUyJChfY29udGV4dDIpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0Mi5wcmV2ID0gX2NvbnRleHQyLm5leHQpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgX2NvbnRleHQyLm5leHQgPSAyOwogICAgICAgICAgICAgICAgICByZXR1cm4gZGlzcGF0Y2goJ2QyYWRtaW4vZGIvZ2V0JywgewogICAgICAgICAgICAgICAgICAgIGRiTmFtZTogJ3N5cycsCiAgICAgICAgICAgICAgICAgICAgcGF0aDogJ3NpemUudmFsdWUnLAogICAgICAgICAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogJ2RlZmF1bHQnLAogICAgICAgICAgICAgICAgICAgIHVzZXI6IHRydWUKICAgICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgY2FzZSAyOgogICAgICAgICAgICAgICAgICBzdGF0ZS52YWx1ZSA9IF9jb250ZXh0Mi5zZW50OwogICAgICAgICAgICAgICAgICAvLyDlupTnlKgKICAgICAgICAgICAgICAgICAgZGlzcGF0Y2goJ2FwcGx5Jyk7IC8vIGVuZAoKICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpOwoKICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dDIuc3RvcCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwgX2NhbGxlZTIpOwogICAgICAgIH0pKTsKCiAgICAgICAgcmV0dXJuIGZ1bmN0aW9uIChfeDIpIHsKICAgICAgICAgIHJldHVybiBfcmVmNi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgIH07CiAgICAgIH0oKSk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["C:/Code/软工时间寒假作业/schoolSpace/src/store/modules/d2admin/modules/size.js"],"names":["Vue","router","namespaced","state","value","actions","apply","refresh","commit","prototype","$ELEMENT","size","root","replace","isLoaded","Promise","resolve","timer","setInterval","clearInterval","set","dispatch","dbName","path","user","load","defaultValue"],"mappings":"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","sourcesContent":["import Vue from 'vue'\nimport router from '@/router'\n\nexport default {\n  namespaced: true,\n  state: {\n    // 尺寸\n    value: '' // medium small mini\n  },\n  actions: {\n    /**\n     * @description 将当前的设置应用到 element\n     * @param {Object} context\n     * @param {Boolean} refresh 是否在设置之后刷新页面\n     */\n    apply ({ state, commit }, refresh) {\n      Vue.prototype.$ELEMENT.size = state.value\n      if (refresh) {\n        commit('d2admin/page/keepAliveClean', null, { root: true })\n        router.replace('/refresh')\n      }\n    },\n    /**\n     * @description 确认已经加载组件尺寸设置 https://github.com/d2-projects/d2-admin/issues/198\n     * @param {Object} context\n     */\n    isLoaded ({ state }) {\n      if (state.value) return Promise.resolve()\n      return new Promise(resolve => {\n        const timer = setInterval(() => {\n          if (state.value) {\n            resolve(clearInterval(timer))\n          }\n        }, 10)\n      })\n    },\n    /**\n     * @description 设置尺寸\n     * @param {Object} context\n     * @param {String} size 尺寸\n     */\n    set ({ state, dispatch }, size) {\n      return new Promise(async resolve => {\n        // store 赋值\n        state.value = size\n        // 应用\n        dispatch('apply', true)\n        // 持久化\n        await dispatch('d2admin/db/set', {\n          dbName: 'sys',\n          path: 'size.value',\n          value: state.value,\n          user: true\n        }, { root: true })\n        // end\n        resolve()\n      })\n    },\n    /**\n     * @description 从持久化数据读取尺寸设置\n     * @param {Object} context\n     */\n    load ({ state, dispatch }) {\n      return new Promise(async resolve => {\n        // store 赋值\n        state.value = await dispatch('d2admin/db/get', {\n          dbName: 'sys',\n          path: 'size.value',\n          defaultValue: 'default',\n          user: true\n        }, { root: true })\n        // 应用\n        dispatch('apply')\n        // end\n        resolve()\n      })\n    }\n  }\n}\n"]}]}