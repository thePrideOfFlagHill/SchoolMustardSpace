{"remainingRequest":"C:\\Users\\58215\\Desktop\\SchoolMustardSpace\\Html (front for user)\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\58215\\Desktop\\SchoolMustardSpace\\Html (front for user)\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\58215\\Desktop\\SchoolMustardSpace\\Html (front for user)\\src\\store\\modules\\d2admin\\modules\\size.js","dependencies":[{"path":"C:\\Users\\58215\\Desktop\\SchoolMustardSpace\\Html (front for user)\\src\\store\\modules\\d2admin\\modules\\size.js","mtime":1590487885000},{"path":"C:\\Users\\58215\\Desktop\\SchoolMustardSpace\\Html (front for user)\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\58215\\Desktop\\SchoolMustardSpace\\Html (front for user)\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\58215\\Desktop\\SchoolMustardSpace\\Html (front for user)\\node_modules\\eslint-loader\\index.js","mtime":1588755592739}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC5leGVjIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuc3RyaW5nLnJlcGxhY2UiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZSI7CmltcG9ydCBfYXN5bmNUb0dlbmVyYXRvciBmcm9tICJDOi9Vc2Vycy81ODIxNS9EZXNrdG9wL1NjaG9vbE11c3RhcmRTcGFjZS9IdG1sIChmcm9udCBmb3IgdXNlcikvbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgVnVlIGZyb20gJ3Z1ZSc7CmltcG9ydCByb3V0ZXIgZnJvbSAnQC9yb3V0ZXInOwpleHBvcnQgZGVmYXVsdCB7CiAgbmFtZXNwYWNlZDogdHJ1ZSwKICBzdGF0ZTogewogICAgLy8g5bC65a+4CiAgICB2YWx1ZTogJycgLy8gbWVkaXVtIHNtYWxsIG1pbmkKCiAgfSwKICBhY3Rpb25zOiB7CiAgICAvKioKICAgICAqIEBkZXNjcmlwdGlvbiDlsIblvZPliY3nmoTorr7nva7lupTnlKjliLAgZWxlbWVudAogICAgICogQHBhcmFtIHtPYmplY3R9IGNvbnRleHQKICAgICAqIEBwYXJhbSB7Qm9vbGVhbn0gcmVmcmVzaCDmmK/lkKblnKjorr7nva7kuYvlkI7liLfmlrDpobXpnaIKICAgICAqLwogICAgYXBwbHk6IGZ1bmN0aW9uIGFwcGx5KF9yZWYsIHJlZnJlc2gpIHsKICAgICAgdmFyIHN0YXRlID0gX3JlZi5zdGF0ZSwKICAgICAgICAgIGNvbW1pdCA9IF9yZWYuY29tbWl0OwogICAgICBWdWUucHJvdG90eXBlLiRFTEVNRU5ULnNpemUgPSBzdGF0ZS52YWx1ZTsKCiAgICAgIGlmIChyZWZyZXNoKSB7CiAgICAgICAgY29tbWl0KCdkMmFkbWluL3BhZ2Uva2VlcEFsaXZlQ2xlYW4nLCBudWxsLCB7CiAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgfSk7CiAgICAgICAgcm91dGVyLnJlcGxhY2UoJy9yZWZyZXNoJyk7CiAgICAgIH0KICAgIH0sCgogICAgLyoqCiAgICAgKiBAZGVzY3JpcHRpb24g56Gu6K6k5bey57uP5Yqg6L2957uE5Lu25bC65a+46K6+572uIGh0dHBzOi8vZ2l0aHViLmNvbS9kMi1wcm9qZWN0cy9kMi1hZG1pbi9pc3N1ZXMvMTk4CiAgICAgKiBAcGFyYW0ge09iamVjdH0gY29udGV4dAogICAgICovCiAgICBpc0xvYWRlZDogZnVuY3Rpb24gaXNMb2FkZWQoX3JlZjIpIHsKICAgICAgdmFyIHN0YXRlID0gX3JlZjIuc3RhdGU7CiAgICAgIGlmIChzdGF0ZS52YWx1ZSkgcmV0dXJuIFByb21pc2UucmVzb2x2ZSgpOwogICAgICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgICAgICB2YXIgdGltZXIgPSBzZXRJbnRlcnZhbChmdW5jdGlvbiAoKSB7CiAgICAgICAgICBpZiAoc3RhdGUudmFsdWUpIHsKICAgICAgICAgICAgcmVzb2x2ZShjbGVhckludGVydmFsKHRpbWVyKSk7CiAgICAgICAgICB9CiAgICAgICAgfSwgMTApOwogICAgICB9KTsKICAgIH0sCgogICAgLyoqCiAgICAgKiBAZGVzY3JpcHRpb24g6K6+572u5bC65a+4CiAgICAgKiBAcGFyYW0ge09iamVjdH0gY29udGV4dAogICAgICogQHBhcmFtIHtTdHJpbmd9IHNpemUg5bC65a+4CiAgICAgKi8KICAgIHNldDogZnVuY3Rpb24gc2V0KF9yZWYzLCBzaXplKSB7CiAgICAgIHZhciBzdGF0ZSA9IF9yZWYzLnN0YXRlLAogICAgICAgICAgZGlzcGF0Y2ggPSBfcmVmMy5kaXNwYXRjaDsKICAgICAgcmV0dXJuIG5ldyBQcm9taXNlKCAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogICAgICAgIHZhciBfcmVmNCA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZShyZXNvbHZlKSB7CiAgICAgICAgICByZXR1cm4gcmVnZW5lcmF0b3JSdW50aW1lLndyYXAoZnVuY3Rpb24gX2NhbGxlZSQoX2NvbnRleHQpIHsKICAgICAgICAgICAgd2hpbGUgKDEpIHsKICAgICAgICAgICAgICBzd2l0Y2ggKF9jb250ZXh0LnByZXYgPSBfY29udGV4dC5uZXh0KSB7CiAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgIC8vIHN0b3JlIOi1i+WAvAogICAgICAgICAgICAgICAgICBzdGF0ZS52YWx1ZSA9IHNpemU7IC8vIOW6lOeUqAoKICAgICAgICAgICAgICAgICAgZGlzcGF0Y2goJ2FwcGx5JywgdHJ1ZSk7IC8vIOaMgeS5heWMlgoKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDQ7CiAgICAgICAgICAgICAgICAgIHJldHVybiBkaXNwYXRjaCgnZDJhZG1pbi9kYi9zZXQnLCB7CiAgICAgICAgICAgICAgICAgICAgZGJOYW1lOiAnc3lzJywKICAgICAgICAgICAgICAgICAgICBwYXRoOiAnc2l6ZS52YWx1ZScsCiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHN0YXRlLnZhbHVlLAogICAgICAgICAgICAgICAgICAgIHVzZXI6IHRydWUKICAgICAgICAgICAgICAgICAgfSwgewogICAgICAgICAgICAgICAgICAgIHJvb3Q6IHRydWUKICAgICAgICAgICAgICAgICAgfSk7CgogICAgICAgICAgICAgICAgY2FzZSA0OgogICAgICAgICAgICAgICAgICAvLyBlbmQKICAgICAgICAgICAgICAgICAgcmVzb2x2ZSgpOwoKICAgICAgICAgICAgICAgIGNhc2UgNToKICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgICB9KSk7CgogICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gpIHsKICAgICAgICAgIHJldHVybiBfcmVmNC5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgIH07CiAgICAgIH0oKSk7CiAgICB9LAoKICAgIC8qKgogICAgICogQGRlc2NyaXB0aW9uIOS7juaMgeS5heWMluaVsOaNruivu+WPluWwuuWvuOiuvue9rgogICAgICogQHBhcmFtIHtPYmplY3R9IGNvbnRleHQKICAgICAqLwogICAgbG9hZDogZnVuY3Rpb24gbG9hZChfcmVmNSkgewogICAgICB2YXIgc3RhdGUgPSBfcmVmNS5zdGF0ZSwKICAgICAgICAgIGRpc3BhdGNoID0gX3JlZjUuZGlzcGF0Y2g7CiAgICAgIHJldHVybiBuZXcgUHJvbWlzZSggLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICB2YXIgX3JlZjYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUyKHJlc29sdmUpIHsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlMiQoX2NvbnRleHQyKSB7CiAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dDIucHJldiA9IF9jb250ZXh0Mi5uZXh0KSB7CiAgICAgICAgICAgICAgICBjYXNlIDA6CiAgICAgICAgICAgICAgICAgIF9jb250ZXh0Mi5uZXh0ID0gMjsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGRpc3BhdGNoKCdkMmFkbWluL2RiL2dldCcsIHsKICAgICAgICAgICAgICAgICAgICBkYk5hbWU6ICdzeXMnLAogICAgICAgICAgICAgICAgICAgIHBhdGg6ICdzaXplLnZhbHVlJywKICAgICAgICAgICAgICAgICAgICBkZWZhdWx0VmFsdWU6ICdkZWZhdWx0JywKICAgICAgICAgICAgICAgICAgICB1c2VyOiB0cnVlCiAgICAgICAgICAgICAgICAgIH0sIHsKICAgICAgICAgICAgICAgICAgICByb290OiB0cnVlCiAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgc3RhdGUudmFsdWUgPSBfY29udGV4dDIuc2VudDsKICAgICAgICAgICAgICAgICAgLy8g5bqU55SoCiAgICAgICAgICAgICAgICAgIGRpc3BhdGNoKCdhcHBseScpOyAvLyBlbmQKCiAgICAgICAgICAgICAgICAgIHJlc29sdmUoKTsKCiAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQyLnN0b3AoKTsKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0sIF9jYWxsZWUyKTsKICAgICAgICB9KSk7CgogICAgICAgIHJldHVybiBmdW5jdGlvbiAoX3gyKSB7CiAgICAgICAgICByZXR1cm4gX3JlZjYuYXBwbHkodGhpcywgYXJndW1lbnRzKTsKICAgICAgICB9OwogICAgICB9KCkpOwogICAgfQogIH0KfTs="},{"version":3,"sources":["C:/Users/58215/Desktop/SchoolMustardSpace/Html (front for user)/src/store/modules/d2admin/modules/size.js"],"names":["Vue","router","namespaced","state","value","actions","apply","refresh","commit","prototype","$ELEMENT","size","root","replace","isLoaded","Promise","resolve","timer","setInterval","clearInterval","set","dispatch","dbName","path","user","load","defaultValue"],"mappings":"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","sourcesContent":["import Vue from 'vue'\nimport router from '@/router'\n\nexport default {\n  namespaced: true,\n  state: {\n    // 尺寸\n    value: '' // medium small mini\n  },\n  actions: {\n    /**\n     * @description 将当前的设置应用到 element\n     * @param {Object} context\n     * @param {Boolean} refresh 是否在设置之后刷新页面\n     */\n    apply ({ state, commit }, refresh) {\n      Vue.prototype.$ELEMENT.size = state.value\n      if (refresh) {\n        commit('d2admin/page/keepAliveClean', null, { root: true })\n        router.replace('/refresh')\n      }\n    },\n    /**\n     * @description 确认已经加载组件尺寸设置 https://github.com/d2-projects/d2-admin/issues/198\n     * @param {Object} context\n     */\n    isLoaded ({ state }) {\n      if (state.value) return Promise.resolve()\n      return new Promise(resolve => {\n        const timer = setInterval(() => {\n          if (state.value) {\n            resolve(clearInterval(timer))\n          }\n        }, 10)\n      })\n    },\n    /**\n     * @description 设置尺寸\n     * @param {Object} context\n     * @param {String} size 尺寸\n     */\n    set ({ state, dispatch }, size) {\n      return new Promise(async resolve => {\n        // store 赋值\n        state.value = size\n        // 应用\n        dispatch('apply', true)\n        // 持久化\n        await dispatch('d2admin/db/set', {\n          dbName: 'sys',\n          path: 'size.value',\n          value: state.value,\n          user: true\n        }, { root: true })\n        // end\n        resolve()\n      })\n    },\n    /**\n     * @description 从持久化数据读取尺寸设置\n     * @param {Object} context\n     */\n    load ({ state, dispatch }) {\n      return new Promise(async resolve => {\n        // store 赋值\n        state.value = await dispatch('d2admin/db/get', {\n          dbName: 'sys',\n          path: 'size.value',\n          defaultValue: 'default',\n          user: true\n        }, { root: true })\n        // 应用\n        dispatch('apply')\n        // end\n        resolve()\n      })\n    }\n  }\n}\n"]}]}