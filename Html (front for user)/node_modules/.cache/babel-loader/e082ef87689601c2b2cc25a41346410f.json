{"remainingRequest":"C:\\Users\\58215\\Desktop\\SchoolMustardSpace\\Html (front for user)\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\58215\\Desktop\\SchoolMustardSpace\\Html (front for user)\\node_modules\\eslint-loader\\index.js??ref--13-0!C:\\Users\\58215\\Desktop\\SchoolMustardSpace\\Html (front for user)\\src\\libs\\util.db.js","dependencies":[{"path":"C:\\Users\\58215\\Desktop\\SchoolMustardSpace\\Html (front for user)\\src\\libs\\util.db.js","mtime":1590487885000},{"path":"C:\\Users\\58215\\Desktop\\SchoolMustardSpace\\Html (front for user)\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\58215\\Desktop\\SchoolMustardSpace\\Html (front for user)\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\58215\\Desktop\\SchoolMustardSpace\\Html (front for user)\\node_modules\\eslint-loader\\index.js","mtime":1588755592739}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuY29uY2F0IjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCBsb3cgZnJvbSAnbG93ZGInOwppbXBvcnQgTG9jYWxTdG9yYWdlIGZyb20gJ2xvd2RiL2FkYXB0ZXJzL0xvY2FsU3RvcmFnZSc7CmltcG9ydCB1dGlsIGZyb20gJ0AvbGlicy91dGlsJzsKaW1wb3J0IHsgY2xvbmVEZWVwIH0gZnJvbSAnbG9kYXNoJzsKdmFyIGFkYXB0ZXIgPSBuZXcgTG9jYWxTdG9yYWdlKCJkMmFkbWluLSIuY29uY2F0KHByb2Nlc3MuZW52LlZVRV9BUFBfVkVSU0lPTikpOwp2YXIgZGIgPSBsb3coYWRhcHRlcik7CmRiLmRlZmF1bHRzKHsKICBzeXM6IHt9LAogIGRhdGFiYXNlOiB7fQp9KS53cml0ZSgpOwpleHBvcnQgZGVmYXVsdCBkYjsKLyoqCiAqIEBkZXNjcmlwdGlvbiDmo4Dmn6Xot6/lvoTmmK/lkKblrZjlnKgg5LiN5a2Y5Zyo55qE6K+d5Yid5aeL5YyWCiAqIEBwYXJhbSB7T2JqZWN0fSBwYXlsb2FkIGRiTmFtZSB7U3RyaW5nfSDmlbDmja7lupPlkI3np7AKICogQHBhcmFtIHtPYmplY3R9IHBheWxvYWQgcGF0aCB7U3RyaW5nfSDot6/lvoQKICogQHBhcmFtIHtPYmplY3R9IHBheWxvYWQgdXNlciB7Qm9vbGVhbn0g5Yy65YiG55So5oi3CiAqIEBwYXJhbSB7T2JqZWN0fSBwYXlsb2FkIHZhbGlkYXRvciB7RnVuY3Rpb259IOaVsOaNruagoemqjOmSqeWtkCDov5Tlm54gdHJ1ZSDooajnpLrpqozor4HpgJrov4cKICogQHBhcmFtIHtPYmplY3R9IHBheWxvYWQgZGVmYXVsdFZhbHVlIHsqfSDliJ3lp4vljJbpu5jorqTlgLwKICogQHJldHVybnMge1N0cmluZ30g5Y+v5Lul55u05o6l5L2/55So55qE6Lev5b6ECiAqLwoKZXhwb3J0IGZ1bmN0aW9uIHBhdGhJbml0KF9yZWYpIHsKICB2YXIgX3JlZiRkYk5hbWUgPSBfcmVmLmRiTmFtZSwKICAgICAgZGJOYW1lID0gX3JlZiRkYk5hbWUgPT09IHZvaWQgMCA/ICdkYXRhYmFzZScgOiBfcmVmJGRiTmFtZSwKICAgICAgX3JlZiRwYXRoID0gX3JlZi5wYXRoLAogICAgICBwYXRoID0gX3JlZiRwYXRoID09PSB2b2lkIDAgPyAnJyA6IF9yZWYkcGF0aCwKICAgICAgX3JlZiR1c2VyID0gX3JlZi51c2VyLAogICAgICB1c2VyID0gX3JlZiR1c2VyID09PSB2b2lkIDAgPyB0cnVlIDogX3JlZiR1c2VyLAogICAgICBfcmVmJHZhbGlkYXRvciA9IF9yZWYudmFsaWRhdG9yLAogICAgICB2YWxpZGF0b3IgPSBfcmVmJHZhbGlkYXRvciA9PT0gdm9pZCAwID8gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHRydWU7CiAgfSA6IF9yZWYkdmFsaWRhdG9yLAogICAgICBfcmVmJGRlZmF1bHRWYWx1ZSA9IF9yZWYuZGVmYXVsdFZhbHVlLAogICAgICBkZWZhdWx0VmFsdWUgPSBfcmVmJGRlZmF1bHRWYWx1ZSA9PT0gdm9pZCAwID8gJycgOiBfcmVmJGRlZmF1bHRWYWx1ZTsKICB2YXIgdXVpZCA9IHV0aWwuY29va2llcy5nZXQoJ3V1aWQnKSB8fCAnZ2hvc3QtdXVpZCc7CiAgdmFyIGN1cnJlbnRQYXRoID0gIiIuY29uY2F0KGRiTmFtZSwgIi4iKS5jb25jYXQodXNlciA/ICJ1c2VyLiIuY29uY2F0KHV1aWQpIDogJ3B1YmxpYycpLmNvbmNhdChwYXRoID8gIi4iLmNvbmNhdChwYXRoKSA6ICcnKTsKICB2YXIgdmFsdWUgPSBkYi5nZXQoY3VycmVudFBhdGgpLnZhbHVlKCk7CgogIGlmICghKHZhbHVlICE9PSB1bmRlZmluZWQgJiYgdmFsaWRhdG9yKHZhbHVlKSkpIHsKICAgIGRiLnNldChjdXJyZW50UGF0aCwgZGVmYXVsdFZhbHVlKS53cml0ZSgpOwogIH0KCiAgcmV0dXJuIGN1cnJlbnRQYXRoOwp9Ci8qKgogKiBAZGVzY3JpcHRpb24g5bCG5pWw5o2u5a2Y5YKo5Yiw5oyH5a6a5L2N572uIHwg6Lev5b6E5LiN5a2Y5Zyo5Lya6Ieq5Yqo5Yid5aeL5YyWCiAqIEBkZXNjcmlwdGlvbiDmlYjmnpznsbvkvLzkuo7lj5blgLwgZGJOYW1lLnBhdGggPSB2YWx1ZQogKiBAcGFyYW0ge09iamVjdH0gcGF5bG9hZCBkYk5hbWUge1N0cmluZ30g5pWw5o2u5bqT5ZCN56ewCiAqIEBwYXJhbSB7T2JqZWN0fSBwYXlsb2FkIHBhdGgge1N0cmluZ30g5a2Y5YKo6Lev5b6ECiAqIEBwYXJhbSB7T2JqZWN0fSBwYXlsb2FkIHZhbHVlIHsqfSDpnIDopoHlrZjlgqjnmoTlgLwKICogQHBhcmFtIHtPYmplY3R9IHBheWxvYWQgdXNlciB7Qm9vbGVhbn0g5piv5ZCm5Yy65YiG55So5oi3CiAqLwoKZXhwb3J0IGZ1bmN0aW9uIGRiU2V0KF9yZWYyKSB7CiAgdmFyIF9yZWYyJGRiTmFtZSA9IF9yZWYyLmRiTmFtZSwKICAgICAgZGJOYW1lID0gX3JlZjIkZGJOYW1lID09PSB2b2lkIDAgPyAnZGF0YWJhc2UnIDogX3JlZjIkZGJOYW1lLAogICAgICBfcmVmMiRwYXRoID0gX3JlZjIucGF0aCwKICAgICAgcGF0aCA9IF9yZWYyJHBhdGggPT09IHZvaWQgMCA/ICcnIDogX3JlZjIkcGF0aCwKICAgICAgX3JlZjIkdmFsdWUgPSBfcmVmMi52YWx1ZSwKICAgICAgdmFsdWUgPSBfcmVmMiR2YWx1ZSA9PT0gdm9pZCAwID8gJycgOiBfcmVmMiR2YWx1ZSwKICAgICAgX3JlZjIkdXNlciA9IF9yZWYyLnVzZXIsCiAgICAgIHVzZXIgPSBfcmVmMiR1c2VyID09PSB2b2lkIDAgPyBmYWxzZSA6IF9yZWYyJHVzZXI7CiAgZGIuc2V0KHBhdGhJbml0KHsKICAgIGRiTmFtZTogZGJOYW1lLAogICAgcGF0aDogcGF0aCwKICAgIHVzZXI6IHVzZXIKICB9KSwgdmFsdWUpLndyaXRlKCk7Cn0KLyoqCiAqIEBkZXNjcmlwdGlvbiDojrflj5bmlbDmja4KICogQGRlc2NyaXB0aW9uIOaViOaenOexu+S8vOS6juWPluWAvCBkYk5hbWUucGF0aCB8fCBkZWZhdWx0VmFsdWUKICogQHBhcmFtIHtPYmplY3R9IHBheWxvYWQgZGJOYW1lIHtTdHJpbmd9IOaVsOaNruW6k+WQjeensAogKiBAcGFyYW0ge09iamVjdH0gcGF5bG9hZCBwYXRoIHtTdHJpbmd9IOWtmOWCqOi3r+W+hAogKiBAcGFyYW0ge09iamVjdH0gcGF5bG9hZCBkZWZhdWx0VmFsdWUgeyp9IOWPluWAvOWksei0peeahOm7mOiupOWAvAogKiBAcGFyYW0ge09iamVjdH0gcGF5bG9hZCB1c2VyIHtCb29sZWFufSDmmK/lkKbljLrliIbnlKjmiLcKICovCgpleHBvcnQgZnVuY3Rpb24gZGJHZXQoX3JlZjMpIHsKICB2YXIgX3JlZjMkZGJOYW1lID0gX3JlZjMuZGJOYW1lLAogICAgICBkYk5hbWUgPSBfcmVmMyRkYk5hbWUgPT09IHZvaWQgMCA/ICdkYXRhYmFzZScgOiBfcmVmMyRkYk5hbWUsCiAgICAgIF9yZWYzJHBhdGggPSBfcmVmMy5wYXRoLAogICAgICBwYXRoID0gX3JlZjMkcGF0aCA9PT0gdm9pZCAwID8gJycgOiBfcmVmMyRwYXRoLAogICAgICBfcmVmMyRkZWZhdWx0VmFsdWUgPSBfcmVmMy5kZWZhdWx0VmFsdWUsCiAgICAgIGRlZmF1bHRWYWx1ZSA9IF9yZWYzJGRlZmF1bHRWYWx1ZSA9PT0gdm9pZCAwID8gJycgOiBfcmVmMyRkZWZhdWx0VmFsdWUsCiAgICAgIF9yZWYzJHVzZXIgPSBfcmVmMy51c2VyLAogICAgICB1c2VyID0gX3JlZjMkdXNlciA9PT0gdm9pZCAwID8gZmFsc2UgOiBfcmVmMyR1c2VyOwogIHJldHVybiBuZXcgUHJvbWlzZShmdW5jdGlvbiAocmVzb2x2ZSkgewogICAgcmVzb2x2ZShjbG9uZURlZXAoZGIuZ2V0KHBhdGhJbml0KHsKICAgICAgZGJOYW1lOiBkYk5hbWUsCiAgICAgIHBhdGg6IHBhdGgsCiAgICAgIHVzZXI6IHVzZXIsCiAgICAgIGRlZmF1bHRWYWx1ZTogZGVmYXVsdFZhbHVlCiAgICB9KSkudmFsdWUoKSkpOwogIH0pOwp9Ci8qKgogKiBAZGVzY3JpcHRpb24g6I635Y+W5a2Y5YKo5pWw5o2u5bqT5a+56LGhCiAqIEBwYXJhbSB7T2JqZWN0fSBwYXlsb2FkIHVzZXIge0Jvb2xlYW59IOaYr+WQpuWMuuWIhueUqOaItwogKi8KCmV4cG9ydCBmdW5jdGlvbiBkYXRhYmFzZSgpIHsKICB2YXIgX3JlZjQgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHt9LAogICAgICBfcmVmNCRkYk5hbWUgPSBfcmVmNC5kYk5hbWUsCiAgICAgIGRiTmFtZSA9IF9yZWY0JGRiTmFtZSA9PT0gdm9pZCAwID8gJ2RhdGFiYXNlJyA6IF9yZWY0JGRiTmFtZSwKICAgICAgX3JlZjQkcGF0aCA9IF9yZWY0LnBhdGgsCiAgICAgIHBhdGggPSBfcmVmNCRwYXRoID09PSB2b2lkIDAgPyAnJyA6IF9yZWY0JHBhdGgsCiAgICAgIF9yZWY0JHVzZXIgPSBfcmVmNC51c2VyLAogICAgICB1c2VyID0gX3JlZjQkdXNlciA9PT0gdm9pZCAwID8gZmFsc2UgOiBfcmVmNCR1c2VyLAogICAgICBfcmVmNCR2YWxpZGF0b3IgPSBfcmVmNC52YWxpZGF0b3IsCiAgICAgIHZhbGlkYXRvciA9IF9yZWY0JHZhbGlkYXRvciA9PT0gdm9pZCAwID8gZnVuY3Rpb24gKCkgewogICAgcmV0dXJuIHRydWU7CiAgfSA6IF9yZWY0JHZhbGlkYXRvciwKICAgICAgX3JlZjQkZGVmYXVsdFZhbHVlID0gX3JlZjQuZGVmYXVsdFZhbHVlLAogICAgICBkZWZhdWx0VmFsdWUgPSBfcmVmNCRkZWZhdWx0VmFsdWUgPT09IHZvaWQgMCA/ICcnIDogX3JlZjQkZGVmYXVsdFZhbHVlOwoKICByZXR1cm4gbmV3IFByb21pc2UoZnVuY3Rpb24gKHJlc29sdmUpIHsKICAgIHJlc29sdmUoZGIuZ2V0KHBhdGhJbml0KHsKICAgICAgZGJOYW1lOiBkYk5hbWUsCiAgICAgIHBhdGg6IHBhdGgsCiAgICAgIHVzZXI6IHVzZXIsCiAgICAgIHZhbGlkYXRvcjogdmFsaWRhdG9yLAogICAgICBkZWZhdWx0VmFsdWU6IGRlZmF1bHRWYWx1ZQogICAgfSkpKTsKICB9KTsKfQ=="},{"version":3,"sources":["C:/Users/58215/Desktop/SchoolMustardSpace/Html (front for user)/src/libs/util.db.js"],"names":["low","LocalStorage","util","cloneDeep","adapter","process","env","VUE_APP_VERSION","db","defaults","sys","database","write","pathInit","dbName","path","user","validator","defaultValue","uuid","cookies","get","currentPath","value","undefined","set","dbSet","dbGet","Promise","resolve"],"mappings":"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","sourcesContent":["import low from 'lowdb'\nimport LocalStorage from 'lowdb/adapters/LocalStorage'\nimport util from '@/libs/util'\nimport { cloneDeep } from 'lodash'\n\nconst adapter = new LocalStorage(`d2admin-${process.env.VUE_APP_VERSION}`)\nconst db = low(adapter)\n\ndb\n  .defaults({\n    sys: {},\n    database: {}\n  })\n  .write()\n\nexport default db\n\n/**\n * @description 检查路径是否存在 不存在的话初始化\n * @param {Object} payload dbName {String} 数据库名称\n * @param {Object} payload path {String} 路径\n * @param {Object} payload user {Boolean} 区分用户\n * @param {Object} payload validator {Function} 数据校验钩子 返回 true 表示验证通过\n * @param {Object} payload defaultValue {*} 初始化默认值\n * @returns {String} 可以直接使用的路径\n */\nexport function pathInit ({\n  dbName = 'database',\n  path = '',\n  user = true,\n  validator = () => true,\n  defaultValue = ''\n}) {\n  const uuid = util.cookies.get('uuid') || 'ghost-uuid'\n  const currentPath = `${dbName}.${user ? `user.${uuid}` : 'public'}${path ? `.${path}` : ''}`\n  const value = db.get(currentPath).value()\n  if (!(value !== undefined && validator(value))) {\n    db\n      .set(currentPath, defaultValue)\n      .write()\n  }\n  return currentPath\n}\n\n/**\n * @description 将数据存储到指定位置 | 路径不存在会自动初始化\n * @description 效果类似于取值 dbName.path = value\n * @param {Object} payload dbName {String} 数据库名称\n * @param {Object} payload path {String} 存储路径\n * @param {Object} payload value {*} 需要存储的值\n * @param {Object} payload user {Boolean} 是否区分用户\n */\nexport function dbSet ({\n  dbName = 'database',\n  path = '',\n  value = '',\n  user = false\n}) {\n  db.set(pathInit({\n    dbName,\n    path,\n    user\n  }), value).write()\n}\n\n/**\n * @description 获取数据\n * @description 效果类似于取值 dbName.path || defaultValue\n * @param {Object} payload dbName {String} 数据库名称\n * @param {Object} payload path {String} 存储路径\n * @param {Object} payload defaultValue {*} 取值失败的默认值\n * @param {Object} payload user {Boolean} 是否区分用户\n */\nexport function dbGet ({\n  dbName = 'database',\n  path = '',\n  defaultValue = '',\n  user = false\n}) {\n  return new Promise(resolve => {\n    resolve(cloneDeep(db.get(pathInit({\n      dbName,\n      path,\n      user,\n      defaultValue\n    })).value()))\n  })\n}\n\n/**\n * @description 获取存储数据库对象\n * @param {Object} payload user {Boolean} 是否区分用户\n */\nexport function database ({\n  dbName = 'database',\n  path = '',\n  user = false,\n  validator = () => true,\n  defaultValue = ''\n} = {}) {\n  return new Promise(resolve => {\n    resolve(db.get(pathInit({\n      dbName, path, user, validator, defaultValue\n    })))\n  })\n}\n"]}]}